<!doctype html>
<html>
<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="img/favicon.ico"> 
	<link rel="stylesheet" href="css/vendor/fluidbox.min.css">
	<link rel="stylesheet" href="css/main.css">

	<!-- GANTT files-->
	<script type="stylesheet" src="dhtmlxgantt.css"></script>
	<script type="text/javascript" src="dhtmlxgantt.js"></script>

	<script type="text/javascript" src="js/jsc3d_ie.min.js"></script>
	<script type="text/javascript" src="js/jsc3d.min.js"></script>
    <script type="text/javascript" src="js/jsc3d.webgl.js"></script>

	<title>FabAcademy 2015</title>

</head>
<body>

	<header>
	</header>

	<div id="content">

		<section class="intro">

			<a id="profile_photo" href="javascript:ReplaceContentInContainer('middle',document.getElementById('about').innerHTML,'about')" ><img class="images-default" src="img/daniele_ingrassia.jpeg" alt="Daniele Ingrassia"></a>
			<h2 class="col-2">Hello, I'm <span class="nl"> <a href="javascript:ReplaceContentInContainer('middle',document.getElementById('about').innerHTML,'about')"><span class="redones">Daniele Ingrassia</span></a></span></h2>
			<p></p><p> Welcome to my repository!<br>
			Here you can find my works @<a href="http://www.fabacademy.org/"><span sytle="font-weight:bold;" class="redones">FabAcademy 2015</span></a>.
			</p>
		
		</section>

		<section class="row">
			<div id="links" class="col-full">
				<h2>  
					<a id="fp" href="javascript:ReplaceContentInContainer('middle',document.getElementById('final_project').innerHTML,'final_project')">Final Project</a>
					<a id="ex" href="javascript:ReplaceContentInContainer('middle',document.getElementById('exercises').innerHTML,'exercises');">Assignments</a>
					<a id="ab" href="javascript:ReplaceContentInContainer('middle',document.getElementById('about').innerHTML,'about')">About</a>
					<a id="co" href="javascript:ReplaceContentInContainer('middle',document.getElementById('contact').innerHTML,'contact')">Contact</a>
				</h2>
			</div>
		</section>

		<section id= "about" class="row">
			<div class="photo-grid">				
				<p>
				I won’t hide behind the work that I am doing or the studies that I have done in the past.<span class="redones"> I’m a dreamer.</span> In my personal way of thinking this means that I always try to reach very difficult and often untrusted objectives that put me in a <span class="redones">constant challenge</span> with myself and that quickly change my cognition of what I am capable of.
				</p>
				<img class="images" src="img/moto.jpg">
				<img class="images" src="img/car.jpeg">
				<ul class="lists">
				<li>So, here are some of the things I had fun to do with:</li>
				<li><span class="redones">disassembling a car</span> in order to make a dune buggy </li>
				<li><span class="redones">building a motorcycle</span> with pieces taken from junkyard</li>
				<li>inventing a new kind of hybrid <span class="redones">recommendation and profiling system</span> used in the official mobile app of <a href="http://www.universiadetrentino.org/"><span class="redones-link">WU2013</span></a></li>
				<li>inventing an automatic <span class="redones">topic recognition system</span> that is capable to analyze free text</li>
				<li>making an <a href="https://www.youtube.com/watch?v=I93_ldjfg0w"><span class="redones-link">Android controlled car</span></a> with a toy car, a netbook motherboard and Arduino</li>
				</ul>
				<img class="images" src="img/graph.jpg">
				<img class="images" src="img/Practionist_Agent.jpg"></a>
			

				<ul class="lists">
				<li>Having said this, here are some details on "<span class="redones">normal</span>" things:</li>
				<li>I’m a qualified technician in electrotechnics</li>
				<li>I’m an Information Technology engineer</li>
				<li>I work since the end of 2012 as a junior researcher at <a href="https://is3.eng.it/is-home/"><span class="redones-link">IS3 Lab</span></a> of <a href="http://www.eng.it/"><span class="redones-link">Engineering Ingegneria Informatica</span></a></li>
				<li>I’m specialized in <span class="redones">A.I.</span>, specifically in <a href="http://practionist.eng.it/"><span class="redones-link">PRACTical reasONIng sySTems</span></a> and recommender systems</li>
				</ul>
				<ul></ul>
			</div>
		</section>

		<section id= "final_project" class="row">
			<div class="photo-grid">
				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('project1').innerHTML,'project1')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">1. Concept</span></a>
				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('project2').innerHTML,'project2')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">2. Hardware: flight controller</span></a>
			</div>
		</section>	

		
		<section id= "contact" class="row">
			<div class="photo-grid">
				<p>Gmail and Google+: <a href="https://plus.google.com/115164644362254413966/posts"><span class="redones-link">ingrassiada@gmail.com</span></a><br>
				Linkedin: <a href="http://it.linkedin.com/in/danieleingrassia"><span class="redones-link">Daniele Ingrassia</span></a>
				</p>
			</div>
		</section>

		<section id= "week1" >
			<div class="weeks">
				<p>
				During this week I've learned about <span class="redones">principles and practices, project management</span>.
				<br>
				<br>
				Digital fabrication is not new to me as I've already watched some videos about it and the Neil's speeches, but I'm really excited about the course that is starting. Digital fabrication, as a lot of other things that we then discover, is inspired by nature. But, what here is making the difference, is the fact that we are talking about one of the best feature that nature has built-in: <span class="redones">self-reproduction</span>. I was thinking about computer's CPU and memory as organizers of electrons via small quantified amounts of electricity, and due to this I was imagining a program as an ordered bunch of electrons groups. When I learned about digital fabrication this point of view became obsolete as we are now at the next step:  <span class="redones">a piece of code does not just describe a thing, it's a thing itself. </span>
				</p><br>
				<p>Do you like this  <span class="redones">site</span>?</p>
				<br>
				<p>
				Even if I'm a IT engineer, I'm not familiar with <span class="redones">web development</span> because I often work with backend's services and components. So I like the fact I had the opportunity to study a bit of this kind of things. I prefer big fonts to help readability, and I don't like pages full of text or little details, I just want to put only the things that are strictly needed and nothing else. The same strategy I will use for additional web components. Also, if you don't want to read all the text, you can just <span class="redones">follow the red words</span> to understand the main keywords and topics of the page you are looking at.
				To edit <span class="redones">HTML</span> and <span class="redones">CSS</span> Massimo suggested us to use <span class="redones">Brackets</span>. I tried Brackets a bit, but I quickly discovered that I wasn't familiar with the text colors of the Brackets' themes. Also I missed the document text preview on the right side. So I ended up with <span class="redones">Sublime</span>, a lightweight HTML editor that we use sometimes at work.</p>
				<p>Here is a comparison of the two editors:</p><br>
				<img class="images-default" src="img/editors.jpeg" style="size=80%" alt="editors">
				<p><br>To effectively test in locale my web pages I used the web server <span class="redones">nginx</span>. 
				Via APT I easily installed nginx:</p>
				<p><pre class="prettyprint lang-bash">sudo apt-get install nginx</pre></p>
				<p>Then I changed its document root with the path of my directory inside my local git FabAcademy repository. To do this I edited the nginx configuration file of the default site:</p>
				<p><pre class="prettyprint lang-bash">sudo nano /etc/nginx/sites-enabled/deafult</pre></p>
				<p> and replaced the line:</p>
				<p><pre class="prettyprint lang-bash">root /usr/share/nginx/html;</pre></p>
				<p>with:</p>
				<p><pre class="prettyprint lang-bash">root /home/satsha/git/FabAcademy2015-Opendot/ingrassia.daniele;</pre></p>
				<p>In the nginx configuration file this line is inside the server block, so this path is considered the starting point of all the locations (url paths) of this server block. In this case only the default location "/" was present. I also changed the <span class="redones">port</span> of the default server block from 8080 to 8081, because I may already have other services on the 8080:</p>
				<p><pre class="prettyprint lang-bash">listen 8081 default_server;</pre></p>
				<p>Then, file saved and back on bash, I started nginx with:</p>
				<p><pre class="prettyprint lang-bash">sudo service nginx start</pre></p>
				<p>And at</p>
				<p><pre class="prettyprint lang-bash">http://127.0.0.1:8081</pre></p>
				<p>browser successfully showed me my test index.html:</p>
				<img class="images-default" src="img/test_index.jpeg" alt="editors">
				<p>At this point I was ready to start with HTML and CSS development. First I headed to <a href="http://www.w3schools.com/"><span class="redones-link">W3Schools</span></a> to revise the <span class="redones">structure</span> of a web page and some of the HTML tags that Massimo teached us about:</p>


				<p><pre class="prettyprint lang-html">&lthtml&gt &lt!-- define an HTML document --&gt<br> &lthead&gt &lt!-- document's meta data --&gt<br>  &lttitle&gtTitle of the document&lt/title&gt<br> &lt/head&gt<br> &ltbody&gt &lt!-- document's content --&gt<br>  &ltsection&gt &lt!-- section --&gt<br>   &ltdiv&gt &lt!-- division --&gt<br>    &ltp&gtsome text&lt/p&gt &lt!-- paragraph --&gt<br>    &lta href="http://www.fabacademy.org"&gt&lt/a&gt &lt!--hyperlink--&gt<br>    &ltimg src="image.jpg"&gt&lt/img&gt &lt!--image--&gt<br>    &ltul&gtList title &lt!-- unordered list --&gt<br>     &ltli&gtlist item&lt/li&gt &lt!--list item--&gt<br>   &lt/ul&gt<br>   &lt/div&gt<br>  &lt/section&gt<br> &lt/body&gt<br>&lt/html&gt</pre></p>


				<p>Then I analyzed how to <span class="redones">reference</span> a specific HTML tag:</p>
				<p><pre class="prettyprint lang-html">&ltp id="id1" class="class1"&gtsome text&lt/p&gt &lt!-- paragraph --&gt</pre></p>				
				<p>The difference between <span class="redones">id</span> and <span class="redones">class</span> is that id identifies only one object, while a class identifies a group of objects. Here it is how to reference these identifiers inside <span class="redones">CSS</span>:</p>
				<p><pre class="prettyprint lang-html">body{} /* apply style inside body tag */<br>.class1 {} /* apply style on all the object that belong t class1 */<br>#id1 {} /* apply style on all the object with id id1 */</pre></p>

				<br>
				<p>What about <span class="redones">git</span>?</p><br>
				<p>We often use git at work, so I'm not new of this kind of <span class="redones">distributed version control</span>. However I was happy (when I was able of!) to help my fellow students whenever they needed. To sync with our intermediate <span class="redones">repository</span> and <span class="redones">push</span> my modifications I followed these steps.
				</p>
				<p>First I cloned the repository locally:</p>
				<p><pre class="prettyprint lang-bash">git clone https://github.com/opendot/FabAcademy2015-Opendot.git</pre></p>
				<p>Then I added my site inside my own folder, and added it and its files to <span class="redones">virtual index</span>:</p>
				<p><pre class="prettyprint lang-bash">git add -A .</pre></p>
				<p>With the modifications inside virtual index, I can now <span class="redones">commit</span> to my local repository:</p>
				<p><pre class="prettyprint lang-bash">git commit -m "first commit of daniele ingrassia's website"</pre></p>
				<p>Just before pushing I <span class="redones">pull</span>ed, so I'm sure that if anybody in the meanwhile made any push I get his modifications:</p><p><pre class="prettyprint lang-bash">git pull origin master</pre></p>
				<p>Finally I pushed my modifications on the remote repository:</p>
				<pre class="prettyprint lang-bash">git push origin master</pre></p>

			</div>
		</section>

		<section id= "week2" class="row">
			<div class="photo-grid">
				<p>This week I've learned about <span class="redones">computer-aided design</span>.</p>
				<br>
				<br>
				<p>Apart from a few and simple experiments with Blender, I've never used <span class="redones">CAD</span> or <span class="redones">rendering</span> software. At the beginning of the week, Massimo told us that we would have talked only about a subset of the long list of the software presented in MIT lecture. So, I've first started with installing such software, and, since I'm on Linux, I could not install all of them directly, but I had to use my Windows virtual machine. Here is a table with the main features of the software Massimo introduced us:</p>
				 
				 <table border="1" style="width:100%; text-align:center;">
  					
  					<tr>
    				<td>Name</td>
    				<td>Dim.</td>
    				<td>Used for</td>
  					<td>OS</td>
  					<td>License</td>
  					<td>Notes</td>
  					</tr>

  					<tr>
    				<td><span class="redones">Gimp</span></td>
    				<td>2D</td>
    				<td>bitmap images</td>
  					<td>multi</td>
  					<td>LGPL/GPL</td>
  					<td>Photoshop free clone</td>
  					</tr>

  					<td><span class="redones">Inkscape</span></td>
    				<td>2D</td>
    				<td>vector graphics</td>
  					<td>multi</td>
  					<td>GPL</td>
  					<td>Vetcors' control points</span></td>
  					</tr>

  					<td><span class="redones">QCad</span></td>
    				<td>2D</td>
    				<td>CAD</td>
  					<td>multi</td>
  					<td>GPL</td>
  					<td>Very easy</td>
  					</tr>

  					<td><span class="redones">DraftSight</span></td>
    				<td>2D</td>
    				<td>CAD</td>
  					<td>mac/linux</td>
  					<td>freeware</td>
  					<td>Autocad clone</td>
  					</tr>

  					 <td><span class="redones">FreeCad</span></td>
    				<td>2D/3D</td>
    				<td>CAD</td>
  					<td>multi</td>
  					<td>LGPL</td>
  					<td>It's a beta</td>
  					</tr>

  					<td><span class="redones">Blender</span></td>
    				<td>3D</td>
    				<td>3D modeling</td>
  					<td>multi</td>
  					<td>GPL</td>
  					<td>Good for meshes</td>
  					</tr>

  					<td><span class="redones">Rhino</span></td>
    				<td>3D</td>
    				<td>3D modeling/CAD</td>
  					<td>win/mac</td>
  					<td>proprietary</td>
  					<td>Good for NURBS</td>
  					</tr>
				</table> 
				 <p><br><span class="redones">Inkscape</span> was one of the first software that I tried out. It was very easy to learn and in short time I was able to easily manage how to use the vectors' control points:</p>
  				 <img class="images-default" src="img/inkscape.jpeg">
  				 <p>After some use of Inkscape I thought that it wasn't the right choice for designing something precise, like the drone I want to build or a part of it. If I need to 3D print parts, or to measure distance between points, the best is to use a 2D/3D CAD software. Accordingly to this I  decided to try <span class="redones">FreeCad</span>. FreedCad was very good, and also relatively easy to me. The problem was that FreeCad is a beta, and I experienced some errors and chrashes in the middle of the work that made me consider this software not a reliable choice. I also briefly tried <span class="redones">QCad</span>, but after FreedCad it seemed to be too simple for the scope I had. The lastest software in the Massimo's list that is specialized in 2D CAD is <span class="redones">DraftSight</span>. Since it's a clone of the famous Autocad, and therefore inherits its commands, I felt comfortable with DraftSight both at the beginning and then when I tried to use more advanced commands. I decided to use DraftSight for <span class="redones">2D technical drawing</span>.</p>
				
  				 <p>Here is the design of the drone's <span class="redones">frame</span> and its dimensions, made with DraftSight(<a href="drawings/frame2D.dwg"><span class="redones-link" >download</span></a>):<br></p>
  				 <img class="images-default" src="img/frame2D_web.gif">
  				 <p><br>Furthermore, because of the special <span class="redones">assembly</span>  feature the drones have, I also tried to design the <span class="redones">cubic frame</span>(<a href="drawings/cubic_frame2D.dwg"><span class="redones-link" >download</span></a>):<br><br></p>
				 <img class="images-default" src="img/cage2D_web.gif">
				 <p><br>When I saw these drawings clompleted, I could not wait to see them <span class="redones">rendered in 3D</span>! As a strategy I was thinking about exporting the 2D technical drawings I made to svg format, and then doing an import in  <span class="redones">Blender</span>. At the first usages of Blender I was advantaged by the little experiences of the past. But then it was a nightmare: I get lost in countless commands that Blender has and also I encountered some bugs of the boolean modifier. So, as a last chance for 3D I tried <span class="redones">Rhino</span> three months trial in the Windows virtual machine. Despite a non easy start, and after some difficulties, I really appreciated Rhino. So taken further by the desire to render the 2D technical drawings I managed to correctly import the svg files, extruded the surfaces, and reached the goal to decently render them, with the compliance of the dimensions!</p>
				 <p>So, here you can see the surfaces just before <span class="redones">extrusion</span>:<br><br></p>
				 <img class="images-default" src="img/planar_surfaces.png">
				 <p>Here is the final 3D rendering of the frame(<a href="drawings/frame3D.rar"><span class="redones-link">download</span></a>):<br><br></p>
				 <img stile="size:70%" src="img/frame3D_web.jpg">
				 <p><br>And here is the 3D rendering of the cubic frame(<a href="drawings/cubic_frame3D.rar"><span class="redones-link">download</span></a>):<br><br></p>
				 <img class="images-default" src="img/cage3D_web.jpg">
				 <p><br> Finally you can <span class="redones">play</span> with last one:</p>
			</div>
		</section>

		<section id= "week3" class="row">
			<div class="photo-grid">
				<p>In this week we've talked about <span class="redones">computer-controlled cutting</span>.</p>
				<ul class="lists">
				<li>There are different <span class="redones">cutting techniques</span>, of which the main ones are:</li>
				<li><span class="redones">Vinyl cutting</span>, cheap and simple cutting technology, can cut soft materials like paper and vinyl</li>
				<li><span class="redones">Laser cutting</span>, one of the most spread technologies, can cut materials like wood, PMMA and engrave metals</li>
				<li><span class="redones">Water jet cutting</span>, expensive technology that can cut hard materials like marbles and metals</li>
				</ul>

				<p>Some <span class="redones">principal facts</span> that are needed to know about cutting techniques are relative on how they work. One of these regards the cut: because it has a non zero width, it will destroy thin strips of material around itself. So if we need to cut something in a very precise way, we have to estimate this value to obtain the exact dimensions we want. The width of a cut is called <span class="redones">kerf</span>. Another one is that, even if we get a two dimensional cut, we can combine several cuts to assembly 3D objects and shapes. This can be done, for example, with <span class="redones">joints</span> in order to make a box, or cutting several <span class="redones">layers</span> of different dimensions and stacking them up. An important thing to know about laser is that the shape of a laser cut is not perfectly straight but tends to be a <span class="redones">cone</span>. This effect is more evident by cutting thicker materials.</p> 

				<p>After Wednesday's lecture and Thursday's theory lesson we had the opportunity to see our <span class="redones">laser cutter</span> (a GCC Laser Pro) in action. As first experiment we made some simple cuts on a 3mm scrap piece of plywood. There were alot of details to memorize on how to use this (or in general a) laser cutter, so I decided to write here a brief <span class="redones">step by step guide</span>:</p>				
				<p><span class="redones">1.</span> remove any material already present on the cutting grid
				<br><span class="redones">2.</span> remove any leavings remained in the cutting grid, or below it
				<br><span class="redones">3.</span> place new material on the cutting grid
				<br><span class="redones">4.</span> check if the material is bent (for example wood) and attempt to lock it in order to minimize bending
				<br><span class="redones">5.</span> turn on the laser cutter
				<br><span class="redones">6.</span> calibrate Z axis (height of laser lens) if the previous cut was made with different material
				<br><span class="redones">7.</span> manually place the lens in a desired point, if you want to use a custom starting point
				<br><span class="redones">8.</span> close the protective lid
				<br><span class="redones">9.</span> turn on the filtering system for the material you want to work with
				<br><span class="redones">10.</span> go to PC and open the file you want to print
				<br><span class="redones">11.</span> if necessary assign different layers to different parts of the drawing
				<br><span class="redones">12.</span> put settings for each layer (mainly power, speed values and check vector, raster and air) if needed
				<br><span class="redones">13.</span> put other settings like print area and home position
				<br><span class="redones">14.</span> optionally do a test on a small square of material to check if settings are ok
				<br><span class="redones">15.</span> hit print button
				<br><span class="redones">16.</span> go to the machine's display and select the file to print
				<br><span class="redones">17.</span> start cutting by pressing start button
				<br><span class="redones">18.</span> turn off the laser cutter and filtering system at the end of the cut </p>

				<p>After this first experiment, together with Simone Boasso and Mattia Ciurnelli, we tried to <span class="redones">measure the kerf</span> of our laser cutter. To do this we cutted another 3mm scrap piece of plywood as follows:</p>
				<img class="images-default" src="img/week3/kerf_test.jpg">
				<p>Then we obtained the kerf with the formula shown in the following picture:</p>
				<img class="images-default" src="img/week3/kerf.jpg">
				<p>Settings of the driver were: power 100% and speed 10%. The resulting kerf is <span class="redones">0.12mm</span>. Kerf depends on speed and power of the laser beam and by thickness and type of material. In fact, these values are only a starting point useful to estimate future kerfs for the same or similar conditions.</p>
				<p>Another interesting test made by me and Simone Boasso, was about trying to find the best combination of sizes in order to obtain <span class="redones">wood joints</span>, that will firmly block each other when fitted together. To do this test we made the following drawing(<a href="drawings/week3/joints_test.rar"><span class="redones-link">download</span></a>):</p> 

				<img class="images-default" src="img/week3/joints_file.jpg">

				<p>Where the numbers identify the exact <span class="redones">size of the holes or of the fillings</span>, accordingly with the piece on which they are printed on. We decided to use the kerf measured before, as the single step to increase or decrease the sizes. The first attempt to cut this drawing onto a 6mm plywood has <span class="redones">failed to cut</span> all with settings of power 100% and speed 5%:</p>
				<img class="images-default" src="img/week3/first_joints_cut.jpg">
				<img class="images-default" src="img/week3/second_joints_cut.jpg">

				<p>The second try was successful as we lowered speed to 3.4%. Here is the video of our successful cut:</p>

				<iframe  src="//player.vimeo.com/video/119747304" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p>

				<p><br>You can also notice, as you already seen in the drawing, that with that cut we also tried to <span class="redones">engrave some raster and vector</span> numbers, for these we used the settings of power 100% and speed 80%. Furthermore, to improve precision, we made these engravings before the cuts, to be sure that wood was not moved before. The last part of the test was about to try every <span class="redones">permutation of joints</span> with the pieces we've made:</p>
				<iframe  src="//player.vimeo.com/video/119747305" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p>
				
				<p><br>We also tried to test the wood joints with one of the pieces flipped. This because we want to test how much the cuts made by the laser tend to be a cone. Finally the best permutation for a wood joint was the <span class="redones">filling of 10.12mm with the hole of 9.64mm</span>.</p>

				<p>For my personal experimentations with laser cutting I was thinking about to make an <span class="redones">adjustable notebook stand</span>. I wanted to make this because my notebook often warms up very quickly, forcing me to put something below it to help cooling. The main idea is to realize a rectangular top, perforated for the most to help notebook breathing and supported by two lateral pieces, specially shaped to hold the rectangular top and allow some inclination.</p>

				<ul class="lists">
				<li>Starting from this idea, I made the following <span class="redones">considerations</span>:</li>
				<li>rectangular top must be capable to <span class="redones">support different sizes</span>, so I measured different notebooks from 10" to 17"</li>
				<li>to avoid any future warping I preferred to use 8mm plywood</li>
				<li>lateral pieces must allow breathing to the air intakes on all sides, as well allow to use all sides' connections</li>
				<li>this notebook stand can be used also as <span class="redones">reading desk</span>, so I can use an higher inclination for the last regulation</li>
				<li>plywood offers good sliding friction to the notebook</li>
				<li>I don't take kerf in consideration because of with 8mm plywood and fillings of centimeters the joints will be solid</li>
				<li>one of the joints must be capable of <span class="redones">rotation</span>, so I need to cut a little cylinder around it to help rotation</li>
				<li>as a reinforcement I need to put another piece below the rectangular top, this piece must not bother spaces</li>
				<li>I want the possibility to pass the cables through the rectangular top</li>
				<li>the rectangular top is most stressed longitudinally, so I designed it more resistant on that (irregular circumference)</li>
				<li>to avoid falling of smaller notebook I can fill the central part of rectangular top with two X shaped wood strips</li>
				<li>to reinforce all I can cut some little wood indentations and put there some <span class="redones">o-rings</span></li>
				<li>I want to change inclination of the rectangular top without disassembling all</li>
				<li>the space below the rectangular top can be used to place a power supply, an external hard disk etc.</li>
				</ul>

				<p>Here is the original <span class="redones">drawing</span> of the notebook stand(<a href="drawings/week3/notebook_stand_quote.rar"><span class="redones-link">download</span></a>):</p>
				<img class="images-default" src="img/week3/notebook_stand_quote.gif">
				<p>And here is the drawing just before print to <span class="redones">optimize spaces</span> and the quantity of wood used:</p>
				<img class="images-default" src="img/week3/notebook_stand.gif">
				<p>The settings for my cut were: power 100% and speed 1.4%. This is our laser cutter while <span class="redones">cutting</span> the notebook stand:</p>
				<img class="images-default" src="img/week3/during.jpg">
				<p>And finally here are the <span class="redones">results</span>, all the pieces that constitute the notebook stand:</p>
				<img class="images-default" src="img/week3/disassembled.jpg">
				
				<p>The notebook stand is <span class="redones">solid</span>, easy to assemble/disassemble, it doesn't require complete disassemble to <span class="redones">change inclination</span> and can be safely used also without o-rings. The following pictures show the item assembled, used in different <span class="redones">configurations with and without o-rings.</span>.</p>

				<img class="images-default" src="img/week3/front_empty.jpg">
				<img class="images-default" src="img/week3/side_all.jpg">
				<img class="images-default" src="img/week3/side_front.jpg">
				<img class="images-default" src="img/week3/side_back.jpg">
				<img class="images-default" src="img/week3/side.jpg">
				<img class="images-default" src="img/week3/front.jpg">
				<img class="images-default" src="img/week3/back.jpg">
				
				<p>Finally, here is a video about <span class="redones">inclination change</span> without disassembling:</p>
				<iframe  src="//player.vimeo.com/video/120469898" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p>


			</div>
		</section>

		<section id= "week4" class="row">
			<div class="photo-grid">
				<p>During this week we've talked about <span class="redones">electronics production</span>.</p>
				
				<p>To demonstrate what we've learned, we had to make a <span class="redones">FabISP</span>. A FabISP is a simple <span class="redones">In System Programmer</span> useful for us as an exrcise in soldering and as a starting point in reading a schematic but also to directly work with <span class="redones">smd</span> electronic components. We will use this FabISP to program the boards that we will make along the FabAcademy.</p>

				<p>The first step in order to make this FabISP, is to print the board. Thanks to some experimentations made by our fellow student Enrico Bassi, we can now use a <span class="redones">laser cutter machine</span> to engrave and cut, in a more precisely way, <span class="redones">FR-1</span> sheets. Our laser cutter features two different kind of laser beams, <span class="redones">CO2 and fiber</span>. We used fiber laser to engrave and completely remove copper from the FR-1 surface, and C02 laser to cut the board. The following pictures shows Z-axis calibration and the laser cutter ready to print FabISP board:</p> 

				<img class="images-default" src="img/week4/LaserZ.jpg">
				<img class="images-default" src="img/week4/LaserPRE.jpg">

				<p>And here is a video showing fiber laser while engraving FR-1 copper surface:</p>

				<iframe src="https://player.vimeo.com/video/122442831" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
				
				<p>However, fiber laser need to go through the engraved surface different times, to be sure that all the copper was removed. This happens also if we use almost all the laser power. In fact, whitin some results, is possible to observe some thin copper lines inside engraved part of the PCB. Here you can see a picture about this:</p>

				<img class="images-default" src="img/week4/lines.jpg">

				<p>Once a well-done board was ready, I started collecting and organizing components to be soldered:</p>
				<img class="images-default" src="img/week4/components.jpg">

				<p>After listening some soldering suggestions from Massimo and my fellow student Enrico Bassi, I started to solder the components on the FabISP board. The first board never made to work because <span class="redones">avrdude</span> wasn't able to recognize it. I think that this happened because it was my first smd soldering work. Here you can see the first board:</p>
				<img class="images-default" src="img/week4/FabISP.jpg">

				<p>I printed another board and started over again. For this second attempt, I also added a logo on the board. This time I was very careful with soldering: I tried to watch and test every single connection before going over. Here are some pictures of the process:</p>

				<img class="images-default" src="img/week4/ENGISP.jpg">
				<img class="images-default" src="img/week4/44POS.jpg">
				<img class="images-default" src="img/week4/44BLOCK.jpg">
				<img class="images-default" src="img/week4/44SSOL.jpg">
				<img class="images-default" src="img/week4/USBSOL.jpg">


				<p>This board was ok. Due to the lack of diodes I completed the board with diodes that respect original values (zener type of 3.3V), but aren't in smd form factor. Here is the result with non-smd diodes:</p>
				<img class="images-default" src="img/week4/ENGISP_FINAL.jpg">

				 <p>Finally some other components arrived, so I replaced non-smd diodes with smd ones. In  this process a little piece of copper path has been lost, so I was forced to manually make a bridge in order to get the ISP working. Here you see can see the final result and the console output of the <span class="redones">programming steps</span>:</p>
				
				<img class="images-default" src="img/week4/ISP_rew.jpg">

				<p><pre style="background-color: black;">
satsha@satsha-mint:~/tmp/fabISP_mac.0.8.2_firmware > make clean
rm -f main.hex main.lst main.obj main.cof main.list main.map main.eep.hex main.elf *.o usbdrv/*.o main.s usbdrv/oddebug.s usbdrv/usbdrv.s
satsha@satsha-mint:~/tmp/fabISP_mac.0.8.2_firmware > make hex
avr-gcc -Wall -Os -DF_CPU=20000000       -Iusbdrv -I. -DDEBUG_LEVEL=0 -mmcu=attiny44 -c usbdrv/usbdrv.c -o usbdrv/usbdrv.o
avr-gcc -Wall -Os -DF_CPU=20000000       -Iusbdrv -I. -DDEBUG_LEVEL=0 -mmcu=attiny44 -x assembler-with-cpp -c usbdrv/usbdrvasm.S -o usbdrv/usbdrvasm.o
avr-gcc -Wall -Os -DF_CPU=20000000       -Iusbdrv -I. -DDEBUG_LEVEL=0 -mmcu=attiny44 -c usbdrv/oddebug.c -o usbdrv/oddebug.o
avr-gcc -Wall -Os -DF_CPU=20000000       -Iusbdrv -I. -DDEBUG_LEVEL=0 -mmcu=attiny44 -c main.c -o main.o
main.c:88:13: warning: always_inline function might not be inlinable [-Wattributes]
 static void delay ( void )
             ^
avr-gcc -Wall -Os -DF_CPU=20000000       -Iusbdrv -I. -DDEBUG_LEVEL=0 -mmcu=attiny44 -o main.elf usbdrv/usbdrv.o usbdrv/usbdrvasm.o usbdrv/oddebug.o main.o
rm -f main.hex main.eep.hex
avr-objcopy -j .text -j .data -O ihex main.elf main.hex
avr-size main.hex
   text    data     bss     dec     hex filename
      0    2002       0    2002     7d2 main.hex
satsha@satsha-mint:~/tmp/fabISP_mac.0.8.2_firmware >  sudo make fuse

avrdude -c stk500v1 -P /dev/ttyACM0 -b19200 -p attiny44 -U hfuse:w:0xDF:m -U lfuse:w:0xFF:m


avrdude: AVR device initialized and ready to accept instructions


Reading | ################################################## | 100% 0.05s


avrdude: Device signature = 0x1e9207

avrdude: reading input file "0xDF"

avrdude: writing hfuse (1 bytes):


Writing | ################################################## | 100% 0.02s


avrdude: 1 bytes of hfuse written

avrdude: verifying hfuse memory against 0xDF:

avrdude: load data hfuse data from input file 0xDF:

avrdude: input file 0xDF contains 1 bytes

avrdude: reading on-chip hfuse data:


Reading | ################################################## | 100% 0.02s


avrdude: verifying ...

avrdude: 1 bytes of hfuse verified

avrdude: reading input file "0xFF"

avrdude: writing lfuse (1 bytes):


Writing | ################################################## | 100% 0.02s


avrdude: 1 bytes of lfuse written

avrdude: verifying lfuse memory against 0xFF:

avrdude: load data lfuse data from input file 0xFF:

avrdude: input file 0xFF contains 1 bytes

avrdude: reading on-chip lfuse data:


Reading | ################################################## | 100% 0.02s


avrdude: verifying ...

avrdude: 1 bytes of lfuse verified


avrdude: safemode: Fuses OK (E:FF, H:DF, L:FF)


avrdude done.  Thank you.


satsha@satsha-mint:~/tmp/fabISP_mac.0.8.2_firmware >  sudo make program

avrdude -c stk500v1 -P /dev/ttyACM0 -b19200 -p attiny44 -U flash:w:main.hex:i


avrdude: AVR device initialized and ready to accept instructions


Reading | ################################################## | 100% 0.05s


avrdude: Device signature = 0x1e9207

avrdude: NOTE: "flash" memory has been specified, an erase cycle will be performed

         To disable this feature, specify the -D option.

avrdude: erasing chip

avrdude: reading input file "main.hex"

avrdude: writing flash (1988 bytes):


Writing | ################################################## | 100% 3.40s


avrdude: 1988 bytes of flash written

avrdude: verifying flash memory against main.hex:

avrdude: load data flash data from input file main.hex:

avrdude: input file main.hex contains 1988 bytes

avrdude: reading on-chip flash data:


Reading | ################################################## | 100% 2.26s


avrdude: verifying ...

avrdude: 1988 bytes of flash verified


avrdude: safemode: Fuses OK (E:FF, H:DF, L:FF)


avrdude done.  Thank you.


avrdude -c stk500v1 -P /dev/ttyACM0 -b19200 -p attiny44 -U hfuse:w:0xDF:m -U lfuse:w:0xFF:m


avrdude: AVR device initialized and ready to accept instructions


Reading | ################################################## | 100% 0.05s


avrdude: Device signature = 0x1e9207

avrdude: reading input file "0xDF"

avrdude: writing hfuse (1 bytes):


Writing | ################################################## | 100% 0.02s


avrdude: 1 bytes of hfuse written

avrdude: verifying hfuse memory against 0xDF:

avrdude: load data hfuse data from input file 0xDF:

avrdude: input file 0xDF contains 1 bytes

avrdude: reading on-chip hfuse data:


Reading | ################################################## | 100% 0.02s


avrdude: verifying ...

avrdude: 1 bytes of hfuse verified

avrdude: reading input file "0xFF"

avrdude: writing lfuse (1 bytes):


Writing | ################################################## | 100% 0.02s


avrdude: 1 bytes of lfuse written

avrdude: verifying lfuse memory against 0xFF:

avrdude: load data lfuse data from input file 0xFF:

avrdude: input file 0xFF contains 1 bytes

avrdude: reading on-chip lfuse data:


Reading | ################################################## | 100% 0.02s


avrdude: verifying ...

avrdude: 1 bytes of lfuse verified


avrdude: safemode: Fuses OK (E:FF, H:DF, L:FF)


avrdude done.  Thank you.

satsha@satsha-mint:~/tmp/fabISP_mac.0.8.2_firmware > lsusb
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 004: ID 04f2:b302 Chicony Electronics Co., Ltd 
Bus 001 Device 090: ID 045e:0745 Microsoft Corp. Nano Transceiver v1.0 for Bluetooth
Bus 001 Device 003: ID 8087:07da Intel Corp. 
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 003 Device 043: ID 1781:0c9f Multiple Vendors USBtiny
Bus 003 Device 017: ID 0ace:1215 ZyDAS ZD1211B 802.11g
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
			</pre></p>
				
				<p><br>As you can see from console output, I used an <a href="http://arduino.cc/en/Tutorial/ArduinoISP"><span class="redones-link">Arduino as ISP</span></a> to program the <span class="redones">Attiny44</span>. In order to do this you have to use the following parameters for avrdude in Makefile:</p>
				<p><pre style="background-color: black;">AVRDUDE = avrdude -c stk500v1 -P /dev/ttyACM0 -b19200 -p $(DEVICE)</pre></p>

				<p>Here is a picture of Arduino as ISP connected and ready to program the FabISP:</p>
				<img class="images-default" src="img/week4/flashing.jpeg">

				<p>As we couldn't accomplish in time with this weekly assignment because of the lacking of <span class="redones">CNC mill</span>, Massimo used meanwhile time to teach us <span class="redones">Python</span>. Even if I'm a IT engineer, I didn't know anything about this language except the Monty Python's name. As an experiment and to practice a bit of Python, I made a simple Python framework called <span class="redones">Internet of Arduinos</span>. From readme on my <a href="https://github.com/satshas/InternetOfArduinos"><span class="redones-link">GitHub repo<span class="redones"></a>:</p>
				<p>"Internet of Arduinos (<span class="redones">IoA</span> for friends :) is an Internet of Things Python framework where Things are Arduinos, or other MCU controlled devices. It's in a very early development stage, for now it supports basically HTTP(S) REST to Serial communication."</p>
				<p>Maybe this framework will be useful to us in order to simplify the communication between internet connected devices and our MCUs. Here is a video with an <span class="redones">example of use:</p>
				<p><iframe src="//player.vimeo.com/video/120672822" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> </p>
				<p>Other than this I made some experiment about assembling an <a href="http://arduino.cc/en/Main/Standalone"><span class="redones-link">Arduino UNO on a breadboard</span></a> and flashing it with an <a href="http://arduino.cc/en/Tutorial/ArduinoISP"><span class="redones-link" >Arduino as ISP</span></a>. As you can already see in the video about InternetOfArduinos, the experiments were successful. So here are some pictures about this:</p>
				<img class="images-default" src="img/week4/before.jpeg">
				<img class="images-default" src="img/week4/flashing1.jpeg">
				<img class="images-default" src="img/week4/after.jpeg">

			</div>
		</section>

		<section id= "week5" class="row">
			<div class="photo-grid">
				<p>This week we've learned about <span class="redones">3D scanning and printing</span>.</p>

				<p>As first try about printing a <span class="redones">non-subtractive</span> made piece, I thought about three <span class="redones">concentric spheres</span>. This because the spheres inside the external one cannot be placed after it's printed. Therefore it will be very difficult, if not impossible, to make this with a 2D production technique, like laser cutting. I designed the spheres with Rhino (<a href="drawings/week5/spheres.rar"><span class="redones-link">download</span></a>):</p>

				<img class="images-default" src="img/week5/spheres_drawing.jpg" alt=""></p>
				<img class="images-default" src="img/week5/spheres_drawing_touch.jpg" alt=""></p>
				

				<p>To allow inside spheres to be printed without any <span class="redones">support</span> below, I placed them on a plane. I measured the diameter to be sure that they cannot exit, but also checked that if placed on the plane, they don't touch each other. After drawing was ready, I exported it as <span class="redones">STL</span> to be able to use <span class="redones">Cura</span> in order to obtain <span class="redones">G-code</span>. Our 3D printer is a <a href="http://reprap.org/wiki/Prusa_i3"><span class="redones-link">Prusa Mendel i3</span></a>. Here is a picture and a video about the first part of the printing process:</p>
				
				<img class="images-default" src="img/week5/spheres_start.jpg" alt=""></p>
				<p><iframe src="//player.vimeo.com/video/121041241" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></p>

				<p>As you can see in the previous picture, there were some <span class="redones">problems</span> about the smallest sphere, located at the center. The irregularities shown are due to the fact that the <span class="redones">below surface</span> was not enough to firmly block the sphere with the <span class="redones"> brim</span>. In fact the video shows central sphere moving while extrusor passes on it. I discovered that lateral pillars of the spheres were too <span class="redones">weak</span>, as some of them <span class="redones">broke</span> at the end of printing and when I tried to take spheres with hands. So my first try was unsuccessful, the following picture demonstrates effects of the above problems:</p>

				<img class="images-default" src="img/week5/complete_spheres.jpg" alt=""></p>
				<img class="images-default" src="img/week5/little_spheres_down.jpg" alt=""></p>

				<p>As second attempt, I tried to print again the same piece. But this time, in order to try to resolve problems related to the first try, I increased the <span class="redones">scale</span> of the spheres. This time the print seemed successful:</p>
				<img class="images-default" src="img/week5/spheres_during.jpg" alt=""></p>
				<p>But, near the end of printing piece detached from the brim, so I was forced to stop the printer. As a result, the external sphere remained without roof:</p>
				<img class="images-default" src="img/week5/spheres_no_roof.jpg" alt=""></p>

				<p>Another side effect was about <span class="redones">heat</span>, that slowly modified the printed spheres until they become a little elliptic. In fact they results larger than spheres measured in the drawing. After these attempts, and suggestion from a colleague about the difficulties to make these kind of pieces with this printer, I decided to design something else. To experiment a bit more, I implemented an easy <span class="redones">recursive algorithm</span> that generates one of the simplest fractals: <span class="redones">Koch Snowflake</span>. The algorithm (<a href="other/fractal.py"><span class="redones-link" >download<span class="redones"></a>) was implemented as a <span class="redones">Python Rhinoscript</span> and it was used to draw fractals out of a set of lines. Here is a video that shows the algorithm in action:</p>

				<p><iframe src="//player.vimeo.com/video/121136314" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></p>

				<p>Combining this algorithm with a cylinder what comes out is a strange piece that I called: <span class="redones">fractal tube</span>(<a href="drawings/week5/fractal_tube.rar"><span class="redones-link" >download<span class="redones"></a>):</p>

				<img class="images-default" src="img/week5/fractal_pen_holder_render.jpg" alt=""></p>

				<p>This time the print was  <span class="redones">successful</span>, there are only some minor imperfections due to retraction. You can see the results in the following pictures:</p>
				
				<img class="images-default" src="img/week5/fractal_pen_holder_side.jpg" alt=""></p>
				<img class="images-default" src="img/week5/fractal_pen_holder_up.jpg" alt=""></p>
				<img class="images-default" src="img/week5/pen_holder_real.jpg" alt=""></p>

				<p>For 3D scanning, we had the opportunity to use Xbox 360's <span class="redones">Kinect</span>. Kinect sensors and camera, mixed with the proper software, can act as a low cost but low resolution <span class="redones">3D scanner</span>. Using <span class="redones">Skanect</span> as software for capturing and mixing Kinect's data, I had decent results. The picture on the left shows the raw model obtained from Skanet and imported in <span class="redones">Blender</span>. There were some minor imperfections (on the nose) and some flying objects (bottom left). I manually corrected these, as shown in the picture on the right. Here you can download the final model: <a href="drawings/week5/scan_hq.rar"><span class="redones-link" >scan<span class="redones"></a>.</p>

				<img class="images-default" src="img/week5/scan_raw.jpeg" alt=""></p>
				<img class="images-default" src="img/week5/scan_final.jpeg" alt=""></p>

				<p>Finally you can <span class="redones">play</span> with all the models that I designed this week:</p>

			</div>
		</section>
		<section id= "week6" class="row">
			<div class="photo-grid">
				<p>During this week we've learned about <span class="redones">electronics design</span>.</p>
				<p>The objective of this week is to redraw the <span class="redones">hello-echo board</span> adding to it a LED and a button. To do this we used a PCB design software called <span class="redones">Eagle</span>. With Eagle is possible to design PCBs from two different editor that represent respectively two point of view of the PCB: <span class="redones">schematic</span> and <span class="redones">board</span>. In schematic editor we are dealing with components types and connections between them. So here we specify the <span class="redones">electrical</span> part of the PCB, where important things are components' specifications and how they are connected. Before start working with board editor, is preferable to build the complete schematic of the PCB. This because in board editor we will work with physical specifications of the PCB, and every component added in the schematic editor will be added here as well. In board editor we take care of components' displacement and of <span class="redones">traces</span> that connects them.</p>

				<p>To getting started with Eagle I created a <span class="redones">new project</span> and I added to it a new schematic:</p>
				<img class="images-default" src="img/week6/new_project.png" alt=""></p>
				<img class="images-default" src="img/week6/new_schema.png" alt=""></p>
				
				<p>Then, to be able to use some specific components, I added some FabAcademy Eagle <span class="redones">libraries</span>. Is in fact possible to create and add new components in Eagle. The components are packaged and distributed via libraries.</p>
				<img style="width:90%" class="images-default" src="img/week6/adding_libraries.png" alt=""></p>
				<p>After adding libraries I was able to find and add to the schema <span class="redones">components</span> needed for the hello-echo board.</p>
				<ul class="lists">
				<li>The components needed are:</li>
				<li><span class="redones">6-pin programming header</span> to program the board</li>
				<li><span class="redones">Attiny44A</span> microcontroller</li>
    			<li><span class="redones">FTDI header</span> for power supply and computer connection</li>
    			<li><span class="redones">20 MHz Resonator</span> external crystal clock generator, Attiny44A can work also @20Mhz</li>
    			<li><span class="redones">Capacitor</span> for a better quality input current</li>
    			<li><span class="redones">10K Resistors</span></li>
    			<li><span class="redones">Led</span> for the excerise</li>
    			<li><span class="redones">Resistor</span> to reduce led applied voltage</li>
				</ul>
				<img style="width:90%" class="images-default" src="img/week6/adding_components1.png" alt=""></p>
				<img style="width:90%" class="images-default" src="img/week6/adding_components2.png" alt=""></p>
				<p>So, here are all the components in the schematic, just before connections was drawn:</p>
				<img style="width:90%" class="images-default" src="img/week6/all_components.png" alt=""></p>
				<p>To limit the voltage applied to the led, I had to <span class="redones">calculate resistor value</span>. In order to dimension it, I read current and voltage values form its <a href="http://academy.kaziunas.com/tutorials/Datasheets/LTST-C150CKT.pdf"><span class="redones-link" >datasheet</span></a>:</p> 
				<img class="images-default" class="images-default" src="img/week6/forward_current.png" alt=""></p>
				<img class="images-default" class="images-default" src="img/week6/forward_voltage.png" alt=""></p>
				<p>Here you can see about my exercise on calculating it: </p>
				<img class="images-default" src="img/week6/led_resistance.jpg" alt=""></p>
				<p>Finally here is the complete schematic, with all components connected and the value of the led's resistor assigned to <span class="redones">499 Ohm</span> to avoid be right on the limit value of 80 Ohm:</p>
				<img style="width:90%" class="images-default" src="img/week6/completed_schema.png" alt=""></p>

				<p>Going to the board editor, it first showed a confused group of components, connected by <span class="redones">yellow wires</span>. These wires let us know what connections there are between components, but they aren't the ones that we need to print the PCB. All of these lines have to be transformed in <span class="redones">traces</span>, in order to represent the real PCB to be printed. In this case we have to made a <span class="redones">single layer</span> PCB, so all the traces must be on the same surface. The first thing to do was to put all the components inside the printed area of the limited version of Eagle. As first attempt to order traces, I tried the <span class="redones">autoroute</span> function. This function try to automatically find the best path for each trace:</p>
				<img style="width:90%" class="images-default" src="img/week6/first_autoroute.png" alt=""></p>
				<p>As you can see in the following picture, the autoroute function is not perfect, in fact some of the traces were not made:</p>
				<img style="width:90%" class="images-default" src="img/week6/after_first_autoroute.png" alt=""></p>
				<p>So, with the tutorial board in mind, I tried to replicate it via <span class="redones">manual traces editing</span>. Even if I made some minor changes at the components' displacement, the result was much pretty the same:</p>
				<img style="width:90%" class="images-default" src="img/week6/hello_board_1.png" alt=""></p>
				<p>To be ready to print the circuit, I selected only the first layer and then exported it with <span class="redones">*.png</span> image format, with settings of monochrome and 500DPI of resolution:</p>
				<img style="width:90%" class="images-default" src="img/week6/hello_board_1_layer.png" alt=""></p>
				<img style="width:90%" class="images-default" src="img/week6/hello_board_1_export.png" alt=""></p>
				<p>After that I imported the png file in <span class="redones">Inkscape</span> in order to add some text, and a red square, useful to identify the layer that will cut the board. Here is the final result:</p>
				<img class="images-default" src="img/week6/first_board_traces.jpg" alt=""></p>
				<p>Because I was not satisfied on copy the tutorial's board, I tried to make another one. To do this I redesigned manually all the trace's paths. The following pictures show the final result of my hello-board <span class="redones">personal version</span>.</p>
				<img style="width:90%" class="images-default" src="img/week6/hello_board_2.png" alt=""></p>
				<img style="width:90%" class="images-default" src="img/week6/hello_board_2_layer.png" alt=""></p>

				<img class="images-default" src="img/week6/satshas_board_traces.jpg">

				<p>Here you can find the two Eagle projects I made this week: <a href="drawings/week6/hello_board_1.rar"><span class="redones-link">hello-board</span></a>, <a href="drawings/week6/hello_board_2.rar"><span class="redones-link">personal-hello-board</span></a>.</p>
				<p>And here are also the *.svg files: <a href="drawings/week6/hello_board_1_svg.rar"><span class="redones-link" >hello-board</span></a>, <a href="drawings/week6/hello_board_2_svg.rar"><span class="redones-link" >personal-hello-board</span></a>.</p>

				<p>To make the board we used the same process that was experimented during Electronics Production: engraving pcb with a laser cutter. This is the board just after the laser cutter has finished its work:</p>
				<img class="images-default" src="img/week6/HelloEcho.jpg" alt=""></p>
				<p>Here is a pitcure of the final board, with all components soldered and tested:</p>
				<img class="images-default" src="img/week6/HelloEchoFinal.jpg" alt=""></p>
				<p>I also made a <span class="redones">smoke test</span> by connecting the board to the usb port. Luckily it was ok:</p>
				<img class="images-default" src="img/week6/HelloEchoOK.jpg" alt=""></p>

			</div>
		</section>
		<section id= "week7" class="row">
			<div class="photo-grid">
				<p>This week we dealt with <span class="redones">embedded programming</span>.</p>

				<p>To start with embedded programming, we first need to know a bit more about the microcontroller we are using, the <span class="redones">Attiny44</span>. So I read its <a href="http://www.atmel.com/Images/doc8006.pdf"><span class="redones-link">datasheet</span></a> in order to find some general information about its <span class="redones">pinout</span>. As we have the version with SOIC package, we need to choose the right pinout from datasheet:</p>
				<img class="images-default" src="img/week7/attiny44_pinout.png" alt=""></p>
				<p>Also, I read about the meaning of the <span class="redones">pins' codes</span>, to better understand what I can do with them:</p>
				<img class="images-default" src="img/week7/attiny44_pindesc.png" alt=""></p>
				<p>With this information, I clearly saw how it's possible to decide where to connect microcontroller pins. This is more evident taking back the schema of my hello board, where button and led are connected to two PAx pins. In order to use these pins in our programs, we have to identify them. Here we can read that they are <span class="redones">PA7 for the LED and PA3 for the button</span>:</p>
				<img class="images-default" src="img/week7/pins_sch.png" alt=""></p>
				<p>Also, in the board schematic, we can physically identify where they are:</p>
				<img class="images-default" src="img/week7/pins_brd.png" alt=""></p>

				<p>Before starting in programming something for my hello board, I wanted to check if it was working. To do this I tried to upload the  <a href="http://academy.cba.mit.edu/classes/embedded_programming/hello.ftdi.44.echo.c"><span class="redones-link" >hello.ftdi.44.echo.c</span></a> program, found in FabAcademy embedded programming page. To compile the code, we also need the program's Makefile  <a href="http://academy.cba.mit.edu/classes/embedded_programming/hello.ftdi.44.echo.c.make"><span class="redones-link" >hello.ftdi.44.echo.c.make</span></a>. In order for this file to be read from make program, I renamed it into Makefile. At this point my computer was ready to upload the code, so I finally connected the boards, <span class="redones">FabISP and hello board</span>, together and with USB ports:</p>
				<img class="images-default" src="img/week7/ISP_P.jpg" alt=""></p>


				
				<ul class="lists">
				<li>Once ready, I read inside the Makefile which commands corresponds with my setup. I <span class="redones">successfully uploaded the program</span> with the following commands:</li>
				<li><span class="redones">make</span></li>
				<li><span class="redones">sudo make program-usbtiny-fuses</span></li>
				<li><span class="redones">sudo make program-usbtiny</span></li>
				</ul>

				 <p>Here you can see the console output of these commands:</p>

				<p><pre style="background-color: black;">
satsha@satsha-mint:~/tmp/hello/work > make
avr-objcopy -O ihex hello.ftdi.44.echo.out hello.ftdi.44.echo.c.hex;\
        avr-size --mcu=attiny44 --format=avr hello.ftdi.44.echo.out
AVR Memory Usage
----------------
Device: attiny44

Program:     758 bytes (18.5% Full)
(.text + .data + .bootloader)

Data:         64 bytes (25.0% Full)
(.data + .bss + .noinit)


satsha@satsha-mint:~/tmp/hello/work > sudo make program-usbtiny-fuses
[sudo] password for satsha: 
avr-objcopy -O ihex hello.ftdi.44.echo.out hello.ftdi.44.echo.c.hex;\
        avr-size --mcu=attiny44 --format=avr hello.ftdi.44.echo.out
AVR Memory Usage
----------------
Device: attiny44

Program:     758 bytes (18.5% Full)
(.text + .data + .bootloader)

Data:         64 bytes (25.0% Full)
(.data + .bss + .noinit)


avrdude -p t44 -P usb -c usbtiny -U lfuse:w:0x5E:m

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.00s

avrdude: Device signature = 0x1e9207
avrdude: reading input file "0x5E"
avrdude: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.00s

avrdude: 1 bytes of lfuse written
avrdude: verifying lfuse memory against 0x5E:
avrdude: load data lfuse data from input file 0x5E:
avrdude: input file 0x5E contains 1 bytes
avrdude: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.00s

avrdude: verifying ...
avrdude: 1 bytes of lfuse verified

avrdude: safemode: Fuses OK (H:FF, E:DF, L:5E)

avrdude done.  Thank you.

satsha@satsha-mint:~/tmp/hello/work > sudo make program-usbtiny
avr-objcopy -O ihex hello.ftdi.44.echo.out hello.ftdi.44.echo.c.hex;\
        avr-size --mcu=attiny44 --format=avr hello.ftdi.44.echo.out
AVR Memory Usage
----------------
Device: attiny44

Program:     758 bytes (18.5% Full)
(.text + .data + .bootloader)

Data:         64 bytes (25.0% Full)
(.data + .bss + .noinit)


avrdude -p t44 -P usb -c usbtiny -U flash:w:hello.ftdi.44.echo.c.hex

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.00s

avrdude: Device signature = 0x1e9207
avrdude: NOTE: "flash" memory has been specified, an erase cycle will be performed
         To disable this feature, specify the -D option.
avrdude: erasing chip
avrdude: reading input file "hello.ftdi.44.echo.c.hex"
avrdude: input file hello.ftdi.44.echo.c.hex auto detected as Intel Hex
avrdude: writing flash (758 bytes):

Writing | ################################################## | 100% 0.76s

avrdude: 758 bytes of flash written
avrdude: verifying flash memory against hello.ftdi.44.echo.c.hex:
avrdude: load data flash data from input file hello.ftdi.44.echo.c.hex:
avrdude: input file hello.ftdi.44.echo.c.hex auto detected as Intel Hex
avrdude: input file hello.ftdi.44.echo.c.hex contains 758 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 0.90s

avrdude: verifying ...
avrdude: 758 bytes of flash verified

avrdude: safemode: Fuses OK (H:FF, E:DF, L:5E)

avrdude done.  Thank you.


				</pre></p>
	
				<p><br>Due to my previous experimentations about using an <span class="redones">Arduino as ISP</span>, I also tried to upload the same code of above with an Arduino. To do this I connected my <span class="redones">hello board with an Arduino</span>:</p>
<img class="images-default" src="img/week7/ARDU_P.jpg" alt=""></p>	
				<p>To work with an Arduino, I added the following lines to the Makefile:</p>

				<p><pre style="background-color: black;">
program-arduino: $(PROJECT).hex
	avrdude -p t44 -b19200 -P /dev/ttyACM0 -c stk500v1 -U flash:w:$(PROJECT).c.hex

program-arduino-fuses: $(PROJECT).hex
	avrdude -p t44 -b19200 -P /dev/ttyACM0 -c stk500v1 -U lfuse:w:0x5E:m
</pre></p>

				<ul class="lists">
				<li>And then used the following commands:</li>
				<li><span class="redones">make</span></li>
				<li><span class="redones">sudo make program-arduino-fuses</span></li>
				<li><span class="redones">sudo make program-arduino</span></li>
				</ul>
				<p>Here you can see that, also with an Arduino as ISP, the upload of the program was successful:</p>


	<p><pre style="background-color: black;">
satsha@satsha-mint:~/tmp/hello/work > make
avr-objcopy -O ihex hello.ftdi.44.echo.out hello.ftdi.44.echo.c.hex;\
        avr-size --mcu=attiny44 --format=avr hello.ftdi.44.echo.out
AVR Memory Usage
----------------
Device: attiny44

Program:     758 bytes (18.5% Full)
(.text + .data + .bootloader)

Data:         64 bytes (25.0% Full)
(.data + .bss + .noinit)


satsha@satsha-mint:~/tmp/hello/work > sudo make program-arduino-fuses
avr-objcopy -O ihex hello.ftdi.44.echo.out hello.ftdi.44.echo.c.hex;\
        avr-size --mcu=attiny44 --format=avr hello.ftdi.44.echo.out
AVR Memory Usage
----------------
Device: attiny44

Program:     758 bytes (18.5% Full)
(.text + .data + .bootloader)

Data:         64 bytes (25.0% Full)
(.data + .bss + .noinit)


avrdude -p t44 -b19200 -P /dev/ttyACM0 -c stk500v1 -U lfuse:w:0x5E:m

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.05s

avrdude: Device signature = 0x1e9207
avrdude: reading input file "0x5E"
avrdude: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.02s

avrdude: 1 bytes of lfuse written
avrdude: verifying lfuse memory against 0x5E:
avrdude: load data lfuse data from input file 0x5E:
avrdude: input file 0x5E contains 1 bytes
avrdude: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.02s

avrdude: verifying ...
avrdude: 1 bytes of lfuse verified

avrdude: safemode: Fuses OK (H:FF, E:DF, L:5E)

avrdude done.  Thank you.

satsha@satsha-mint:~/tmp/hello/work > sudo make program-arduino
avr-objcopy -O ihex hello.ftdi.44.echo.out hello.ftdi.44.echo.c.hex;\
        avr-size --mcu=attiny44 --format=avr hello.ftdi.44.echo.out
AVR Memory Usage
----------------
Device: attiny44

Program:     758 bytes (18.5% Full)
(.text + .data + .bootloader)

Data:         64 bytes (25.0% Full)
(.data + .bss + .noinit)


avrdude -p t44 -b19200 -P /dev/ttyACM0 -c stk500v1 -U flash:w:hello.ftdi.44.echo.c.hex

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.05s

avrdude: Device signature = 0x1e9207
avrdude: NOTE: "flash" memory has been specified, an erase cycle will be performed
         To disable this feature, specify the -D option.
avrdude: erasing chip
avrdude: reading input file "hello.ftdi.44.echo.c.hex"
avrdude: input file hello.ftdi.44.echo.c.hex auto detected as Intel Hex
avrdude: writing flash (758 bytes):

Writing | ################################################## | 100% 1.28s

avrdude: 758 bytes of flash written
avrdude: verifying flash memory against hello.ftdi.44.echo.c.hex:
avrdude: load data flash data from input file hello.ftdi.44.echo.c.hex:
avrdude: input file hello.ftdi.44.echo.c.hex auto detected as Intel Hex
avrdude: input file hello.ftdi.44.echo.c.hex contains 758 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 0.79s

avrdude: verifying ...
avrdude: 758 bytes of flash verified

avrdude: safemode: Fuses OK (H:FF, E:DF, L:5E)

avrdude done.  Thank you.


	</pre></p>

				<p><br>Also, I tried to upload and compile the assembly version of hello echo <a href="http://academy.cba.mit.edu/classes/embedded_programming/hello.ftdi.44.echo.asm"><span class="redones-link">hello.ftdi.44.echo.asm</span></a>. <br>Here you can see the console output:</p>
				

<p><pre style="background-color: black;">
satsha@satsha-mint:~/tmp/hello/work_asm > make 
gavrasm hello.ftdi.44.echo.asm
+------------------------------------------------------------+
| gavrasm gerd's AVR assembler Version 3.4 (C)2014 by DG4FAC |
+------------------------------------------------------------+
Compiling Source file: hello.ftdi.44.echo.asm
-------
Pass:        1
145 lines done.

Pass 1 ok.
-------
Pass:        2
Line: 14
Warning 009: Include defs not necessary, using internal values!
  File: hello.ftdi.44.echo.asm, Line: 14
  Source line: .include "tn44def.inc"
Line: 140
Warning 004: Number of bytes on line is odd, added 00 to fit program memory!
  File: hello.ftdi.44.echo.asm, Line: 140
  Source line:          message: .db "hello.ftdi.44.echo.asm: you typed ",0
145 lines done.


60 words code, 18 words constants, total=78 =  3.8%

2 warnings!
Compilation completed, no errors. Bye, bye ...
satsha@satsha-mint:~/tmp/hello/work_asm > sudo make program-usbtiny-fuses
avrdude -p t44 -P usb -c usbtiny -U lfuse:w:0x5E:m

avrdude: AVR device initialized and ready to accept instructions 

Reading | ################################################## | 100% 0.00s

avrdude: Device signature = 0x1e9207
avrdude: reading input file "0x5E"
avrdude: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.00s

avrdude: 1 bytes of lfuse written
avrdude: verifying lfuse memory against 0x5E:
avrdude: load data lfuse data from input file 0x5E:
avrdude: input file 0x5E contains 1 bytes
avrdude: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.00s

avrdude: verifying ...
avrdude: 1 bytes of lfuse verified

avrdude: safemode: Fuses OK (H:FF, E:DF, L:5E)

avrdude done.  Thank you.

satsha@satsha-mint:~/tmp/hello/work_asm > sudo make program-usbtiny
avrdude -p t44 -P usb -c usbtiny -U flash:w:hello.ftdi.44.echo.hex

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.00s

avrdude: Device signature = 0x1e9207
avrdude: NOTE: "flash" memory has been specified, an erase cycle will be performed
         To disable this feature, specify the -D option.
avrdude: erasing chip
avrdude: reading input file "hello.ftdi.44.echo.hex"
avrdude: input file hello.ftdi.44.echo.hex auto detected as Intel Hex
avrdude: writing flash (156 bytes):

Writing | ################################################## | 100% 0.20s

avrdude: 156 bytes of flash written
avrdude: verifying flash memory against hello.ftdi.44.echo.hex:
avrdude: load data flash data from input file hello.ftdi.44.echo.hex:
avrdude: input file hello.ftdi.44.echo.hex auto detected as Intel Hex
avrdude: input file hello.ftdi.44.echo.hex contains 156 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 0.22s

avrdude: verifying ...
avrdude: 156 bytes of flash verified

avrdude: safemode: Fuses OK (H:FF, E:DF, L:5E)

avrdude done.  Thank you.


</pre></p>


				<p><br>To test the hello echo program, I used a Phyton script that can be found here: <a href="http://academy.cba.mit.edu/classes/embedded_programming/term.py"><span class="redones-link">term.py</span></a>. <br>The following screenshot demonstrates the hello echo program working:</p>
				<img class="images-default" src="img/week7/ECHO_OK.png" alt=""></p>

				<p>At this point I was almost sure that my board is working and thus I can start to create a program. For the first attempt I tried to write a <span class="redones">C program</span>. I found that there is a library called <a href="http://www.atmel.com/webdoc/AVRLibcReferenceManual/index_1avr_libc_intro.html"><span class="redones-link">AVR Libc</span></a>, specifically developed to provide a subset of the standard C library <span class="redones">Libc</span>. This library supports almost <a href="http://www.atmel.com/webdoc/AVRLibcReferenceManual/index_1supp_devices.html"><span class="redones-link">all AVR devices</span></a>, and there is also a complete <a href="http://www.atmel.com/webdoc/AVRLibcReferenceManual/index.html"><span class="redones-link">reference manual</span></a> on Atmel website. As starting point I considered the <a href="http://www.atmel.com/webdoc/AVRLibcReferenceManual/group__demos.html"><span class="redones-link">demo projects tutorials</span></a>.</p>
				<p>After I studied a bit of these tutorials and read past students embedded programming exercises, I decided to create a C program that involves <span class="redones">input from a button and/or an external source, output to a led and interrupts</span>. So I ended up in making a sort of <span class="redones">led Ping Pong program </span> between an Arduino and my hello board. After a bit of thinking on it, and some inspiration coming from Massimo Menichinelli 2012 embedded programming exercise, here is the complete C program:</p>

				<p><pre class="prettyprint lang-c">
#include &ltavr/io.h&gt
#include &ltinttypes.h&gt
#include &ltutil/delay.h&gt
#include &ltavr/interrupt.h&gt

void delay_ms(uint16_t ms);
void init();
int signal_received();
void switch_led();

int led_on;

#define F_CPU 20000000UL         	     /* 20MHz crystal oscillator */

#define ARDUINO_AND_LED_PORT PORTA           /* PORTx - register for arduino and led */
#define ARDUINO_AND_BUTTON_PIN PINA          /* PINx - register for arduino input */
#define ARDUINO_BIT PA6                      /* bit for Arduino input */
#define BUTTON_BIT PA3                       /* bit for button input */

#define LED_BIT PA7                          /* bit for button input/output */
#define LED_DDR DDRA                         /* LED data direction register */

#define DEBOUNCE_TIME 5                      /* button debounce time */
#define LOCK_INPUT_TIME 5                    /* time to wait after Arduino input/time to wait after a button press */

#define set(port,pin) (port |= pin)          
#define interrupt (1 << PCIE6)               /* interrupt settings */     
#define interrupt_pin (1 << PCINT6) 	     /* interrupt settings */

//interrupt function
ISR(PCINT0_vect) {
  
    switch_led();  
  
}

//software and hardware initialization function
void init() {
  
	led_on = 0;
	  
        /* set LED pin as digital output */
        LED_DDR = _BV (LED_BIT); 

        /* turn led off */         
        ARDUINO_AND_LED_PORT |= _BV(ARDUINO_BIT);

}

int main (void){
        
  init();

  while (1){
      
    if (signal_received()){
                        
      switch_led();
                       
    }
      
  }
    
}

//simple function to stop execution of given milliseconds
void delay_ms(uint16_t ms) {
        
  while ( ms ){
        
    _delay_ms(1);
    ms--;
    
  }
  
}

//check if a signal from the butto or Arduino ha arrived
int signal_received(){
  
  /* the button is pressed when BUTTON_BIT is clear or Arduino is sending a signal when ARDUINO_BIT is clear */
  if (bit_is_clear(ARDUINO_AND_BUTTON_PIN, ARDUINO_BIT) || bit_is_clear(ARDUINO_AND_BUTTON_PIN, BUTTON_BIT)){
    
    //wait a certain time for button debounce
    delay_ms(DEBOUNCE_TIME);
    
    if (bit_is_clear(ARDUINO_AND_BUTTON_PIN, ARDUINO_BIT) || bit_is_clear(ARDUINO_AND_BUTTON_PIN, BUTTON_BIT))
      return 1;
      
  }

  return 0;

}

//if led is on switch it off and vice versa
void switch_led(){

  if(led_on){
      
    ARDUINO_AND_LED_PORT = 0b00000001;
    led_on = 0;
      
  }else{
    
    ARDUINO_AND_LED_PORT = 0b10000000; 
    led_on = 1;
      
   }
    
} </pre></p>
				<p><br>As you can see from the code, is possible to pilot the hello board's led with the button, but also with a signal from an Arduino. To test this program I also developed a simple <span class="redones">Arduino sketch</span>:</p>


				<p><pre class="prettyprint lang-c">
void setup() {
  
  pinMode(7, OUTPUT);
  pinMode(10, OUTPUT);

}

void loop() {
 
  digitalWrite(10, LOW);
  digitalWrite(7, LOW);
  
  delay(500);
  
  digitalWrite(10, HIGH);
  digitalWrite(7,HIGH);

  delay(500);

}				</pre></p>
				<p><br>Here can see a video that shows the led Ping Pong program while is working with my hello board and an Arduino:</p>
				<iframe src="https://player.vimeo.com/video/122902948" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p>
				<p><br>Also, is possible to pilot the led with the button, as shown in the following video:</p>
				<iframe src="https://player.vimeo.com/video/122902949" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
				<p><br>To experiment a bit more, I tried to control my hello board's led <span class="redones">through internet</span> via a REST service. To do this I used my <span class="redones">InternetOfArduinos</span> framework (here is <a href="https://github.com/satshas/InternetOfArduinos"><span class="redones-link">GitHub repo</span></a>), the same C code of above for the hello board and the following Arduino sketch:</p>
				<p><pre class="prettyprint lang-c">
bool flag = false;

void setup()
{
  Serial.begin(9600);
  pinMode(7, OUTPUT);
}

void loop()
{

  if(Serial.available()){
    
    delay(100);
    
    while(Serial.available())
      Serial.read();
     
     Serial.println("hi, i'm arduino :)!");
  
     if(flag){
     
       flag = false;
       digitalWrite(7, HIGH);
     
     }else{
     
       flag = true;
       digitalWrite(7, LOW);
       
     }
  }
  
}			</pre></p>
			<p><br>In the following video is possible to see that I can control the hello board's led with a REST call made with a smartphone:</p>
			<iframe src="https://player.vimeo.com/video/122906315" width="750" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> 

				<p><br>Apart from C, is also possible to use <span class="redones">Arduino IDE</span> to program our hello board. To do this we need to modify Arduino IDE as described in this tutorial: <a href="http://highlowtech.org/?p=1695"><span class="redones-link">Programming an ATtiny w/ Arduino IDE</span></a>. This tutorial has a little error about where to put attiny folder, the right place is inside Arduino IDE folder and not inside sketchbook folder. Once setted the Arduino IDE, it shows some new settings related to the Attiny MCU family:</p>
				<img class="images-default" src="img/week7/patched_ide.png" alt=""></p>	
				<p>To test coding my hello board with Arduino IDE, I modifed the Button example to have a similar behaviour of C Ping Pong when button is pressed. Here you can see the code:</p>

<p><pre class="prettyprint lang-c">
/*
  Button

 Turns on and off a light emitting diode(LED) connected to digital
 pin 13, when pressing a pushbutton attached to pin 2.


 The circuit:
 * LED attached from pin 13 to ground
 * pushbutton attached to pin 2 from +5V
 * 10K resistor attached to pin 2 from ground

 * Note: on most Arduinos there is already an LED on the board
 attached to pin 13.


 created 2005
 by DojoDave <http://www.0j0.org>
 modified 30 Aug 2011
 by Tom Igoe

 This example code is in the public domain.

 http://www.arduino.cc/en/Tutorial/Button
 */

// constants won't change. They're used here to
// set pin numbers:
const int buttonPin = 3;     // the number of the pushbutton pin
const int ledPin =  7;      // the number of the LED pin

// variables will change:
int buttonState = 0;         // variable for reading the pushbutton status
bool led_on;

void setup() {
  // initialize the LED pin as an output:
  pinMode(ledPin, OUTPUT);
  // initialize the pushbutton pin as an input:
  pinMode(buttonPin, INPUT);
  
  led_on=true;
}

void loop() {
  // read the state of the pushbutton value:
  buttonState = digitalRead(buttonPin);

  // check if the pushbutton is pressed.
  // if it is, the buttonState is HIGH:
  if (buttonState == HIGH) {
    // turn LED on:
    digitalWrite(ledPin, HIGH);
  }
  else {
    // turn LED on and off:
    if(led_on){
      
      digitalWrite(ledPin, LOW);
      led_on=false;
      delay(50);
      
    }else{
    
      digitalWrite(ledPin, HIGH);
      led_on=true;
      delay(50);
      
    }
  }
}</pre></p>

<p><br>Finally, here you can find all the code I've talked about in this week: <a href="other/code.rar"><span class="redones-link">download</span></a>.</p>

			</div>
		</section>
		<section id= "week8" class="row">
			<div class="photo-grid">
				<p>Along this week we've learned about <span class="redones">computer-controlled machining</span>.</p>

				<p>To demonstrate we dealt with CNC's intrinsic way of working, our assignment was to <span class="redones">make something big</span>. Personally, to avoid wood waste, I added to this assignment also a personal objective to build a thing that I will really use. Because of my final project, that probably will require alot of work on electronic and mechanics, I decided to make a <span class="redones">work table</span>. I will use this table to solder boards, to assembly parts and so on.</p> 


				<ul class="lists">
					<li>Here are some <span class="redones">considerations</span> I've taken into account before starting design my work table:</li>
					<li>each of us has available a single wood sheet of <span class="redones">210cm x 145cm x 1.2cm</span>
					<li>actually I live in a place where there isn't so much space, so I chosen a <span class="redones">width x depth of 75cm x 75cm</span></li>
					<li>I could use tools like screwdrivers, tongs etc , so I will create a specific <span class="redones">holed shelf</span> where I can put them</li>
					<li>I could need to put my elbows on it, so table must <span class="redones">resist to some weight</span></li>
					<li>I want to make it <span class="redones">assembly only by joints</span></li>
					<li>I will use a <span class="redones">6mm CNC bit</span></li>
				</ul>

				<p>What comes out of all of these constraints was the following drawing:</p>
				<img class="images-default" src="img/week8/screen.png">

				<p>Because of I manually drawn joints, I also made a <span class="redones">3D model</span> of the work table, in order to check if its dimensions were ok:</p>
				<img class="images-default" src="img/week8/render.jpg">
				<p>At this point I was ready to export an <span class="redones">*.dxf</span> file and to open it with <span class="redones">vCarve Pro</span>. Inside vCarve Pro we can set low level CNC settings, and export our drawings into a file format directly readable by ShopBot CNC controlling software.</p>

				<p>Here you can see some vCarve Pro screenshots that shown the settings I was using. First, I set Job Size and material thickness. We fixed wood sheet with some borderline bolts, so I set height 1cm less:</p>
				
				<img class="images-default" src="img/week8/vCarve_prop.png">
				
				<p>To optimize the cut and to left some wood for future jobs, I used <span class="redones">Nest Parts</span> feature. Here are the nest settings I was using:</p>
				<img class="images-default" src="img/week8/vCarve_nest1.png">
				<p>And here are the results of nesting:</p>
				<img class="images-default" src="img/week8/vCarve_nest2.png">

				<p>The first cuts I wanted to make were the internal ones. This because is possible that a piece will move a bit after it's cut, so if it contains <span class="redones">internal cuts</span>, these will move as well. So I selected all the internals cuts:</p>
				<img class="images-default" src="img/week8/vCarve_int1.png">
				<p>And I applied to them the following settings:</p>
				<img class="images-default" src="img/week8/vCarve_int2.png">
				<p>As you can see, I set <span class="redones">Inside / Left</span> as Machine Vectors, because of these cuts were internal. Finally, for the internal cuts, I wanted to see the preview:</p>
				<img class="images-default" src="img/week8/vCarve_int3.jpg">

				<p>Similar procedure I followed for the <span class="redones">external cuts</span>, with the difference that this time the Machine Vectors setting were <span class="redones">Outside / Right</span>:</p>

				<img class="images-default" src="img/week8/vCarve_ext1.png">
				<img class="images-default" src="img/week8/vCarve_ext2.png">
				<img class="images-default" src="img/week8/vCarve_ext3.jpg">

				<p>Before starting cuts, I used the ShobBot controlling software to reset X and Y axis and to calibrate Z axis:</p>
				<img class="images-default" src="img/week8/sharebot.jpg">

				
				<p>Here you can see a video about our ShopBot starting to do internal cuts:</p>
				<iframe src="https://player.vimeo.com/video/123101274" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

				<p>And here is shown that the Job Size and Nest Parts <span class="redones">Border Gap</span> were ok:</p>
				<iframe src="https://player.vimeo.com/video/123101276" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

				<p>Here is the table, quickly assembled just after it has been cut:</p>
				<img class="images-default" src="img/week8/table_first.jpg">


				<p>To refine table's wood I used some sand paper. Here are some pictures about the <span class="redones">final result</span>:</p>
				<img class="images-default" src="img/week8/table_front.jpg">
				<img class="images-default" src="img/week8/table_back.jpg">
				<img class="images-default" src="img/week8/table_left.jpg">
				<img class="images-default" src="img/week8/table_right.jpg">
				<img class="images-default" src="img/week8/table_eng.jpg">
				<img class="images-default" src="img/week8/table_pra.jpg">
				
				<p>Here are some detailed pictures about the quality of the joints:</p>
				<img class="images-default" src="img/week8/table_holes.jpg">
				<img class="images-default" src="img/week8/table_inc1.jpg">
				<img class="images-default" src="img/week8/table_inc2.jpg">
				<img class="images-default" src="img/week8/table_inc3.jpg">
				<img class="images-default" src="img/week8/table_inc4.jpg">

				<p>Also, some tabs caused <span class="redones">little imperfections</span> while I was detaching pieces, maybe next time I will reduce tabs size and their quantity:</p>
				<img class="images-default" src="img/week8/table_tab1.jpg">
				<img class="images-default" src="img/week8/table_tab2.jpg">

				<p>At the end I also made a <span class="redones">load test</span> with myself on the table, that luckily was <span class="redones">successful</span>:</p>
				<iframe src="https://player.vimeo.com/video/123137722" width="700" height="450" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

				<p><br>And my fellow student <span class="redones">PieLuigi de Palo</span> made a time-lapse video:</p>
				<iframe width="700" height="450" src="https://www.youtube.com/embed/Uvtn-7FNFI4" frameborder="0" allowfullscreen></iframe>

				<p><br>Here you can download the drawing of the <a href="drawings/week8/work_table.3dm.rar"><span class="redones-link">work table</span></a>. Or, if just want to see on the fly the 3D model, here it is:</p>

			</div>
		</section>
		<section id= "week9" class="row">
			<div class="photo-grid">
				<p>In this week we've talked about <span class="redones">molding and casting</span>.</p>

				<p>For this assignment I decided to make a cross composed by <span class="redones">golden spiral</span>. First I drawn a golden spiral with <span class="redones">golden ratio</span>:</p>


				<img class="images-default" src="img/week9/spiral1.jpg">
				<img class="images-default" src="img/week9/spiral2.jpg">

				<p>Then, in order to transform it in a 3D shape, I drawn two circumferences at the begin and the end of the spiral:</p>
				<img class="images-default" src="img/week9/spiral3.jpg">

				<p>To get a 3D shape I used the command <span class="redones">Sweep1</span> of Rhino:</p>
				<img class="images-default" src="img/week9/spiral4.png">

				<p>To create the complete cross I simply copied at 90° degree single spirals:</p>
				<img class="images-default" src="img/week9/object.jpg">

				<p>After completing the cross I was ready to designed the mold. I drawn, accordingly with our <span class="redones">wax block</span>, the mold for silicon rubber. Here you can see wax block with two holes ready to insert half of the cross:</p>
				<img class="images-default" src="img/week9/mold1.jpg">
				<p>And here you can see the final model ready to be CNC'ed:</p>
				<img class="images-default" src="img/week9/mold2.png">
				<p>To check if the model was ok, I also tried to put the mold's faces in front each other. As shown in the following pictures, the faces dimensions were ok:</p>
				<img class="images-default" src="img/week9/mold3.png">
				<img class="images-margin-auto" src="img/week9/mold4.jpg">

				<p>Due to some problems to the FabLab mini CNC mill, I tried to use a trashed piece of solid wood with the <span class="redones">ShopBot CNC</span> and a <span class="redones">3mm end mill</span>. Of course I scaled my 3D model in order to be fully cut with the 3mm end mill. Here you can see a video about ShopBot CNC while it's working the piece:</p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/LOwo2QMlYEM" frameborder="0" allowfullscreen></iframe>

				<p><br>The result was very good, considering the size of the ShopBot. Here you can see the CNC'ed spirals, with applied some <span class="redones">wood coating</span>:</p>
				<img class="images-default" src="img/week9/wood_spirals.jpg">
				<p>I applied some wood coating in order to obtain a better finishing surface. At this point of the process I was ready to <span class="redones">cast the silicon rubber</span>. Before starting casting, I prepared all the things I needed:</p>
				<img class="images-default" src="img/week9/before_start.jpg">
				
				<p>Also, I put some <span class="redones">nails and a bolt</span>, needed to insert the silicon rubber and to get out the air at the end of the spirals.</p>
				<img class="images-default" src="img/week9/nails.jpg">

				<p>Using Rhino I measured the <span class="redones">volume</span>, so I was able to know how much silicon rubber and catalyst I needed. I used <span class="redones">Smooth-Sil 940 silicon rubber</span>, suitable for food-related applications. This silicon rubber has the pot life of <span class="redones">30 minutes and a curing time of 24h</span>. The first step was to weigh silicon rubber:</p>
				<img class="images-default" src="img/week9/silicon_rubber.jpg">
				<p>Then to add the right quantity of catalyst to be sure that all the silicon rubber will be catalysed:</p>
				<img class="images-default" src="img/week9/catalyst.jpg">
				<p>At this point I checked the clock for the pot life, and then I started to slowly blend silicon rubber with the catalyst:</p>
				<img class="images-default" src="img/week9/blend.jpg">
				<p>After a while the <span class="redones">color of the silicon rubber changed</span> from white to an uniform pink, fact that indicates it was fully mixed with the catalyst:</p>
				<img class="images-default" src="img/week9/blended.jpg">
				
				<p>So I started to slowly and carefully cast silicon rubber into the mold:</p>
				
				<img class="images-default" src="img/week9/start_drop.jpg">
				<p>I casted it very slowly, and never changing the contact place of the silicon rubber with the wood. This to avoid as much as possible <span class="redones">bubble airs</span> while the casting process was done. The following pictures shows silicon rubber slowly filling the mold:</p>
				<img class="images-default" src="img/week9/after_drop.jpg">
				<p>Again to avoid bubble airs, and after all silicon rubber was casted, we used a drill with a oblique nail to tremble the mold. Here you can see a video about:</p>
				<iframe width="700" height="450" src="https://www.youtube.com/embed/mcPf8KQ3wr8" frameborder="0" allowfullscreen></iframe>
				<p><br>So here it's the mold with the silicon rubber waiting for <span class="redones">24 hours</span>:</p>
				<img class="images-default" src="img/week9/after_drop_complete.jpg">
				<p>And this what's happened when I tried to remove the silicon rubber:</p>
				<img class="images-default" src="img/week9/first_detach.jpg">
				<p>The capability to <span class="redones">reproduce details</span> of this kind of silicon is very good. As an example it was capable also to get inside into a very thin wood notch:</p>
				<img class="images-default" src="img/week9/particular.jpg">
				<p>So finally here is the silicon rubber mold ready to be used:</p>
				<img class="images-default" src="img/week9/after_ok.jpg">
				<p>A closer look shown me that a little, superficial, area of the silicon rubber <span class="redones">was not correctly catalysed</span>:</p>
				<img class="images-default" src="img/week9/dont_solidify.jpg">
				<p>Due I wasn't have the chance to redo the silicon rubber mold, I was thinking about passing with light sand paper into the final object, in order to reduce the evidence of this little defect. So I started to assembly the silicon rubber mold:</p>
				
				<img class="images-default" src="img/week9/mold_open.jpg">
				<img class="images-default" src="img/week9/closed_mold.jpg">

				<p>I needed also to <span class="redones">compress the mold</span> to be sure that no resin will come out of it. So I used two <span class="redones">flat pieces of wood</span>:</p>
				<img class="images-default" src="img/week9/block.jpg">
				<p>And blocked all with several pieces of electrical scotch tape:</p>
				<img class="images-default" src="img/week9/block_before.jpg">
				<img class="images-default" src="img/week9/fix_block.jpg">

				<p>The first attempt was made with <span class="redones">Smooth Cast Color-Match 325</span>. This resin has a very short <span class="redones">pot life of 2.5 minutes, and a curing time of 10 minutes</span>. As you can see from the following pictures I had two problems. One was that in the short pot life I didn't correctly mixed resin parts. This cause that the final object will never fully solidify. Also, it remained a little bit transparent:</p>
				<img class="images-default" src="img/week9/result_mixed1.jpg">
				<p>The other problem was relative about a <span class="redones">big bubble air</span>, just under the hole for inserting the resin:</p>
				<img class="images-default" src="img/week9/result_mixed.jpg">
				<p>My second attempt was made with <span class="redones">Smooth Cast Color-Match 305</span>, that has a <span class="redones">pot life of 7 minutes and a curing time of 30 minutes</span>. This time I correctly mixed the resin parts, but, even if I tried to <span class="redones">inject the resin more slowly</span>, another air bubble was there:</p>
				<img class="images-default" src="img/week9/result2.jpg">
				<p>As third attempt, again with 305, I tried to <span class="redones">enlarge the the hole for inserting the resin</span>. In this way I avoid the big air bubble at the center, but some other small bubbles were there:</p>
				<img class="images-default" src="img/week9/result3.jpg">
				<p>For my last attempt I tried to put some <span class="redones">gray dye</span> to 305, and to <span class="redones"> insert a nail in the resin filling hole</span> after the resin was casted. This time I get a decent result:</p>
				<img class="images-default" src="img/week9/final_before.jpg">
				<p>So I used some sand paper, to refine the piece and to remove the little defect I talked about before:</p>
				<img class="images-default" src="img/week9/minor.jpg">
				<p>Here you can see the final version of the casted spirals:</p>	
				<img class="images-default" src="img/week9/final1.jpg">
				
				<p>As little experiment I tried also to put inside the resin one of the my failed attempt to solder the ATMega2560, here you can see a picture of that, before the resin was totally catalysed:</p>	

				<img class="images-default" src="img/week9/2560.jpg">

				<p>Here you can find the model of the mold: <a href="drawings/week9/spirals.rar"><span class="redones-link">spirals</span></a>, and here you can <span class="redones">play</span> with the model:</p>

			</div>
		</section>
		<section id= "week10" class="row">
			<div class="photo-grid">
				<p>Along this week we've learned about <span class="redones">input devices</span>.</p>
				
				<p>To start with this assignment, first I tried to make the <span class="redones">Fabkit</span>. I was thinking about using Fabkit and its compatibility with a patched Arduino IDE, as starting board to use some sensors. In order to make Fabkit, I followed the official FabAcademy tutorial posted by Massimo: <a href="http://fabacademy.org/archives/2015/doc/fabkit-0.4.html"><span class="redones-link" >A newer Fabkit</span></a>.</p>

				<p>Despite several difficulties I had in soldering Fabkit, here is the Fabkit soldered:</p>
				<img class="images-default" src="img/week10/fabkit.jpg">

				<p>I managed to successfully upload the Arduino bootloader and some examples sketch like Blink one. However I was <span class="redones">not satisfied by Fabkit</span>. This mainly because you <span class="redones">need to patch your Arduino IDE</span> in order to make it work with Fabkit, and also it differ from original Arduino because of the clock of 8Mhz instead of 16Mhz. Furthermore, there are other differences with original Arduino, like using a resonator instead of a crystal. So after a while I decided <span class="redones">to design my own board</span>, with these differences as the main improvements that my new board can have. This board could be also useful for my final project, as a <span class="redones">first prototype of flight controller</span>.</p>

				<p>I made <span class="redones">several attemtps (5 dead boards!)</span>, before, Thursday night, I was able to made first <span class="redones">working board</span>. I called this board <span class="redones">satshakit</span>. As some of my fellow students had difficulties with Fabkit, they tried to make this prototype board. The board was very appreciated that some of my fellow students made it for their exercises, or use it as a starting point for their final projects. Thus I decided to do this documentation, if anyone wants to try it. I also started a <a href="https://github.com/satshas/satshakit"><span class="redones-link" >Github repo</span></a>.</p>

				<p>Here is a screenshot about <span class="redones">satshakit schematic</span>:</p>

				<img class="images-default" src="img/week10/satshakit_schematic.png">

				<p>And here is a screenshot about <span class="redones">satshakit board</span>:</p>

				<img class="images-default" src="img/week10/satshakit_board.png">

				<p>As we use the Trotec laser cutter machine, here is satshakit inkscape file ready to be printed:</p>

				<img class="images-default" src="img/week10/satshakit_print.png">

				<p>So here is <span class="redones">first satshakit</span> board that worked without problems:</p>

				<img class="images-default" src="img/week10/first_satshakit.jpg">

				<p>In order to help my fellow students to replicate this board, I also made a <span class="redones">BOM of satshakit</span>:</p>
				<iframe width="1200" height="400" src="https://docs.google.com/spreadsheets/d/1svDoZXL4UT52zrwGDGs7aG2bA4hvbDQF-i0Wjd3rae0/pubhtml?widget=true&amp;headers=false"></iframe>
				<p></p>
				<ul class="lists">
				<li><span class="redones">Main improvements</span> of satshakit over Fabkit are:</li>
				<li><span class="redones">16Mhz</span> instead of 8Mhz</li>
				<li><span class="redones">crystal</span> instead of resonator</li>
				<li><span class="redones">it costs less</span> (9.23 euro vs 13.11 euro)</li>
				<li><span class="redones">it uses default Arduino IDE</span> (satshakit is recognized as Arduino UNO) instead of a patched Arduino IDE</span></li>
				<li>it has almost <span class="redones">rect traces</span> instead of almost oblique ones</li>
				<li>ADC6/7 connected instead of ADC6/7 not connected</li>
				<li>larger space to easy soldering</li>
				<li>power led instead of none</li>
				</ul>		


				<p>To use satshakit as an Arduino, here is <span class="redones">Arduino pinout on satshakit<span class="redones">:</p>

				<img class="images-default" src="img/week10/arduino_pin_mapping.png">

				<p>Also, here is the schema about <span class="redones">programming satshakit with a FabISP</span>:</p>
				
				<img class="images-default" src="img/week10/programming_fab_isp.png">

				<p>So here are some boards from my fellow students <span class="redones">Pierluigi de Palo and Mattia Ciurnelli</span>:</p>
				<img class="images-default" src="img/week10/satshakits.jpg">

				<p>And also some videos that show <span class="redones">satshakit while is working</span> with different configurations/sensors:</p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/YNITEv0ebkc" frameborder="0" allowfullscreen></iframe>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/Gk_RFebLofY" frameborder="0" allowfullscreen></iframe>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/ZQmN3uTlZuc" frameborder="0" allowfullscreen></iframe>
				<p></p>
				<p>Rethinking about this week assignment, now with satshakit available, I decided to make a <span class="redones">little radar</span>. I made this radar with a reclycled (from a scanner)  <span class="redones">unipolar stepper motor and two HC-SR04 sonar sensors </span> attached to the stepper with some 
				scotch tape. Here are some pictures about:</p>

				<img class="images-default" src="img/week10/radar_1.jpg">

				<img class="images-default" src="img/week10/radar_2.jpg">

				<img class="images-default" src="img/week10/radar_3.jpg">

				<p>In order to move the stepper motor I design a special version of satshakit board: <span class="redones">satshakit radar</span>. This board is basically a satshakit, plus an <span class="redones">ULN2003A</span> to control the stepper motor. Here is a screenshot about <span class="redones">satshakit radar schematic</span>:</p>
				
				<img class="images-default" src="img/week10/satshakit_radar_schematic.png">

				<p>And here you can see a screenshot about <span class="redones">satshakit radar board:</span></p>

				<img class="images-default" src="img/week10/satshakit_radar_board.png">
				
				<p>Here is a picture of the soldered and ready-to-use satshakit radar board:</p>

				<img class="images-default" src="img/week10/satshakit_radar.jpg">

				<p>To move stepper motor and get distance data from sensors, I wrote the following Arduino sketch (it uses  <a href="https://code.google.com/p/arduino-new-ping/"><span class="redones-link" >NewPing library</span></a> to work with HC-SR4 sensors):</p>

				<p><pre class="prettyprint lang-c">
#include Stepper.h
#include NewPing.h

#define TRIGGER_PIN1  12
#define ECHO_PIN1     11
#define MAX_DISTANCE1 400
#define TRIGGER_PIN2  3
#define ECHO_PIN2     2

#define MAX_DISTANCE2 400
#define STEPS 48
int HALF_TURN = 24;

int count = 0;
boolean dir = true;

NewPing sonar1(TRIGGER_PIN1, ECHO_PIN1, MAX_DISTANCE1);
NewPing sonar2(TRIGGER_PIN2, ECHO_PIN2, MAX_DISTANCE2);

Stepper stepper(STEPS, 5, 6, 7, 8); 

void setup()
{
  
  Serial.begin(115200);
  stepper.setSpeed(30);

}

void loop()
{
  
  delay(50);
  
  if(dir){
 
      ++count;
      stepper.step(1);
      unsigned int uS1 = sonar1.ping();
      Serial.print("S1: ");
      Serial.print(uS1 / US_ROUNDTRIP_CM);
      Serial.println("cm");
      unsigned int uS2 = sonar2.ping();
      Serial.print("S2: ");
      Serial.print(uS2 / US_ROUNDTRIP_CM);
      Serial.println("cm");
      
      if(count==HALF_TURN){
      
        count = 0;
        dir = false;
        
      }
    
  }else{
  
        ++count;
      stepper.step(-1);
      unsigned int uS1 = sonar1.ping();
      Serial.print("S1: ");
      Serial.print(uS1 / US_ROUNDTRIP_CM);
      Serial.println("cm");
      Serial.print("S2: ");
      unsigned int uS2 = sonar2.ping();
      Serial.print(uS2 / US_ROUNDTRIP_CM);
      Serial.println("cm");
  
      if(count==HALF_TURN){
      
        count = 0;
        dir = true;
        
      }
  
  }
  

}
				</pre></p>	

				<p></p>
				<p>Here are some <span class="redones">videos about satshakit radar</span>. Here is satshakit radar  while uploading Arduino bootloader:</p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/ws3hkNioKY0" frameborder="0" allowfullscreen></iframe>

				<p>And here while uploading satshakit radar Arduino sketch:</p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/6jgbYFliTYo" frameborder="0" allowfullscreen></iframe>

				<p>Finally, here is the <span class="redones">satshakit radar working</span> with data about distance of the two sonar sensors (labeled as S1 and S2 in the serial output) displayed in serial monitor. Stepper do half-turn and return back. In this way, with two opposed sonar sensors, radar is reading distance in a 360 degree range: </p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/0FD7bHNqlxU" frameborder="0" allowfullscreen></iframe>
				
				<p>Here you can find the files about satshakit, and satshakit radar eagle projects: <a href="drawings/week10/satshakit.rar"><span class="redones-link" >download</span></a>. Also here is BOM in xlsx: <a href="other/satshakit_BOM.xlsx"><span class="redones-link">download</span></a>.</p>

				


			</div>
		</section>
		<section id= "week11" class="row">
			<div class="photo-grid">
				<p>During this week I've learned about <span class="redones">output devices.</span></p>

				<p>To accomplish with this weekly assignment, and at the same time do so something for my <span class="redones">quadcopter</span> final project, I tried to <span class="redones">control drone ESCs and motors</span> with a prototype of a flight controller board. As flight controller board I used <span class="redones">satshakit</span>, a general purpose Arduino compatible board, developed by me during input devices assignment. Here you can find some information about satshakit: <a href="http://fabacademy.org/archives/2015/doc/projects/satshakit/satshakit.html"><span class="redones-link">FabAcademy project</span></a>, <a href="https://github.com/satshas/satshakit"><span class="redones-link">Github repo</span></a></p>


				<p>As test platform for this assignment I assembled a <span class="redones">250mm quadcopter</span>, with four 12A ESCs, four 2150kv motors and a 2200mAh battery. Here you can see a pitcure about this test quadcopter:</p>

				<img class="images-default" src="img/week11/drone.jpg">

				<p>Satshakit is fully compatible with Arduino libraries, so first I tried to control a single ESC via the <a href="http://www.arduino.cc/en/reference/servo"><span class="redones-link">Arduino servo library</span></a>. Also I wanted to control the ESC via a value sent from serial console to satshakit. In order to do this I wrote the following Arduino sketch:</p>

				<pre class="prettyprint lang-c">
#include &ltServo.h&gt

int readValue = 0, value = 0;

Servo esc1;

void setup() {

  esc1.attach(9);
  Serial.begin(9600);
  
}

void loop() {

  esc1.writeMicroseconds(value);
 
  if(Serial.available()){ 
   
    readValue = Serial.parseInt();
    
    if(readValue != NULL){
    value = readValue;  
    
    Serial.println(value);
    
  }
  }

}
			</pre>
			<p><br><span class="redones">GND</span> of ESC BEC and satshakit must be connected together. Here is the connection schema of this setup:</p>
			<img class="images-default" src="img/week11/simple_schema.jpg">

			<p>And here you can see a picture about the setup of this test:</p>
			<img class="images-default" src="img/week11/drone_1esc_setup.jpg">
			<p>This test was <span class="redones">successfull</span>, the motor started to spin from the value of 1500, and reached maximum rotation speed at 2000. Encouraged from this first result, and as a more <span class="redones">complete setup</span>, I tried to control all the drone ESCs and motors, using a <a href="http://www.spektrumrc.com/Products/Default.aspx?ProdId=SPM5500"><span class="redones-link"> Spectrum DX5</span></a> as remote controller, an <a href="http://www.drotek.fr/shop/en/home/62-imu-10dof-mpu6050-hmc5883-ms5611.html"><span class="redones-link"> Drotek 10DOF</span></a> as IMU and <a href="http://www.multiwii.com/"><span class="redones-link">MultiWii 2.3</span> software</a>. So I configured MultiWii to work my quadcopter configuration:</p>

			<img class="images-default" src="img/week11/multiwii_quadx.png">
			<img class="images-default" src="img/week11/multiwii_motors.png">
			<img class="images-default" src="img/week11/multiwii_imu.png">

			<p>Then I uploaded Multiwii to satshakit, here is the connection schema of this setup:</p>

			<img class="images-default" src="img/week11/complete_schema.jpg">

			<p>Here you can see some pictures about the complete drone setup:</p>
			<img class="images-default" src="img/week11/satshakit.jpg">
			<img class="images-default" src="img/week11/imu.jpg">
			<img class="images-default" src="img/week11/receiver.jpg">
			<img class="images-default" src="img/week11/complete_setup.jpg">

			<p>Finally I successfully managed to control all drone ESCs and read data from the IMU with the remote controller. This test demonstrates that I can <span class="redones">use satshakit as the starting point for my flight controller board</span>. Here you can see a video about:</p>

			<iframe width="700" height="450" src="https://www.youtube.com/embed/kZMLoyP47z4" frameborder="0" allowfullscreen></iframe>



			<p><br>As further experimentation, that regards also my final project, I tried to play with some <span class="redones">electromagnets</span>. In particular I wanted to test how eventually I could control them. I used two  of the following electromagnets:</p>

			<img class="images-default" src="img/week11/electormagnet.jpg">

			<p>So, for sure I cannot power the electromagnet from the satshakit, but I need an external power supply and a relais/transistor to switch them on and off. I ended up in using the following <span class="redones">relais</span>:</p>

			<img class="images-default" src="img/week11/relais.jpg">

			<p>Because of the relais I <span class="redones">alternated electromagnets on/off status</span>, so when an electromagnet is on, the other is off and viceversa. For this setup I simply used the blink Arduino demo sketch, with the pin 13 of the satshakit connected to the relais signal input. Also I used a  <span class="redones">satshakit power board</span>. Here is a photo about this setup:</p>

			<img class="images-default" src="img/week11/electromagnet_setup.jpg">

			<p>And here is a video while the magnetic blink it's working:</p>
			<iframe width="700" height="450" src="https://www.youtube.com/embed/xf46ZWN7ghI" frameborder="0" allowfullscreen></iframe>


			</div>
		</section>
		<section id= "week12" class="row">
			<div class="photo-grid">
				<p>Along this week week we've talked about <span class="redones">composites</span>.</p>

				<p>As composites exercise I was thinking about create a sort of <span class="redones">dome</span>. To obtain a medium size object, and without wasting so much material and time, I decided to create a composite by  covering a <span class="redones">pressfit kit</span>.</p>

				<p>First I started with the dome model. I drawn this model to be easily built with a pressfit kit. Here you can see the dome 3D model, made with <span class="redones">Rhino</span>:</p>
				<img class="images-default" src="img/week12/dome.jpg">

				<p>With the help of  <a href="http://www.123dapp.com/make"><span class="redones-link">123D Make</span></a> and with our laser cutting machine I cut the pressfit kit pieces. I chosen a sheet of <span class="redones">MDF</span> as base material. In the following picture you can see the dome pressfit kit pieces ready to be assembled:</p>
				<img class="images-default" src="img/week12/dome_pieces.jpg">
				<p>As support to recreate the dome model surfaces, I used one <span class="redones">female stocking</span>.</p>
				<img class="images-default" src="img/week12/stockings.jpg">
				<p>Its <span class="redones">elasticity</span> allows to avoid unwanted surfaces and to shape the object in a very similar way we can see in the rendered 3D model. Here is the dome pressfit kit assembled and with the female stoking applied:</p>
				<img class="images-default" src="img/week12/dome_stoockings.jpg">
				<p>As fabric to put inside the resin I tried to use some <span class="redones">mosquito net</span>: </p>
				<img class="images-default" src="img/week12/mosquito net.jpg">
				<p>So I mixed <span class="redones">epoxy resin and the hardner</span> with a proportion of <span class="redones">2:1</span>:</p>
				<img class="images-default" src="img/week12/resin.jpg">
				<p>Within this resin pot life, of about <span class="redones">40 minutes</span>, I spread the resin and mosquito net patches on the dome. Here is the dome just after this process:</p>
				<img class="images-default" src="img/week12/dome_after.jpg">
				<img class="images-default" src="img/week12/dome_after_up.jpg">
				<p>After about <span class="redones">24 hours</span> of waiting I applied also a second layer of resin and patches. After 48 hours here is the dome <span class="redones">final result</span>:</p>
				<img class="images-default" src="img/week12/dome_after_1.jpg">
				<img class="images-default" src="img/week12/dome_after_up_1.jpg">

				<p>Because I used only half of the MDF sheet I decided to make another composite object: a <span class="redones">simple boat</span>. So here it's the boat model I drawn:</p>
				<img class="images-default" src="img/week12/boat.jpg">
				<p>I followed almost the same process of before, with the exception of the fabric I used. This time I tried some large net material:</p>
				<img class="images-default" src="img/week12/large_net_material.jpg">
				<p>Here are the boat pressfit kit pieces before they get assembled:</p>
				<img class="images-default" src="img/week12/boat_pieces.jpg">
				<p>And here is the boat pressfit kit assembled and with the female stocking on it:</p>
				<img class="images-default" src="img/week12/boat_stockings.jpg">
				<img class="images-default" src="img/week12/boat_stockings1.jpg">
				<p>Unfortunately I wasn't able to use this kind of material with our resin, because it's <span class="redones">pre-plastified</span> and resin cannot catch it efficiently. So I backed up with the mosquito net to avoid wasting the resin I've already mixed.</p>
				
				<p>Here you can see the photos about simple<span class="redones"> boat final result</span>:</p>
				<img class="images-default" src="img/week12/boat_after_1.jpg">
				<img class="images-default" src="img/week12/boat_after_2.jpg">
				<img class="images-default" src="img/week12/boat_after_3.jpg">
				<img class="images-default" src="img/week12/boat_after_4.jpg">

				<p>As accidental experimentation, and due to the fact I dropped some resin on a piece of <span class="redones">polystyrene</span> I discovered that this material significantly changes its <span class="redones">strength</span> and <span class="redones">flexibility</span> after a layer or resin solidify on it. Here you can see the of polystyrene on which I dropped the resin, after the resin was solidified:</p>

				<img class="images-default" src="img/week12/polystyrene.jpg">

				<p>And here you can see my hand while trying (with no result) to break it:</p>
				<img class="images-default" src="img/week12/polystyrene_bent.jpg">

				<p>Here you can download the 3D models I drawn for along this week: <a href="drawings/week12/boat.3dm.rar"><span class="redones-link">boat</span></a>
					<a href="drawings/week12/dome.3dm.rar">, <span class="redones-link">dome</span></a>.</p>

			</div>
		</section>
		<section id= "week13" class="row">
			<div class="photo-grid">
				<p>This week we've dealt with <span class="redones">networking and communications</span></p>

				<p>As first experiment with MCU communication, I tried <span class="redones">I2C</span> with two satshakit. The setup was simple, as you can see in the following picture:</p>
				<img class="images-default" src="img/week13/satshakit_i2c.jpg">
				<p>Also, to do a quick test, I used sketches described in the <a href="http://www.arduino.cc/en/Tutorial/MasterReader"><span class="redones-link">Arduino I2C MasterReader tutorial</span></a>. Here you can see a video about this:</p>
				<iframe width="700" height="450" src="https://www.youtube.com/embed/9XcrL3Ypu_s" frameborder="0" allowfullscreen></iframe>

				<p><br>After this simple test was successful, I decided to implement a full <span class="redones">Internet of Things</span> system. Within this, I developed also some improvements to the satshakit board. These improvements regards the realization of a <span class="redones">modular, multicore, satshakit system</span>. Also, in order to supply power to multiple satshakit and additional communication devices, I developed a <span class="redones">satshakit power board</span>. Starting from satshakit power board, I needed to get 5V and 3.3V from an input voltage of 7-12V, and to have available multiple VCCs and GNDs. From these considerations born the power board:</p>

				<img class="images-default" src="img/week13/power_board_sch.jpeg">
				<img class="images-default" src="img/week13/power_board_board.jpeg">

				<p>I designed this board taking into consideration the components I had available: SMD 10uF capacitors, through-hole L7085CV and UA78M33C voltage regulators. Here you can see a picture about a soldered satshakit power board:</p>

				<img class="images-default" src="img/week13/power_board.jpg">

				<p>As MCU communication between the satshakit modular boards, and due to the previous test, I chose to use I2C. Satshakit modular boards have only the following <span class="redones">modifications</span> in confront of the standard satshakit: <span class="redones">4 extra pin header (1 GND,1 VCC,1 A4, 1 A5)</span>. Here you can see the a picture of the modular satshakit board:</p>

				<img class="images-default" src="img/week13/satshakit_modular_board.jpeg">

				<p>To make this modular version, I used <span class="redones">dual layer fiber glass FR4</span> sheets. The key was to center the 4 extra pin header along Y of the eagle board. Here you can see a dual layer board ready to be soldered: </p>

				<img class="images-default" src="img/week13/satshakit_dl_modular.jpg">

				<p>The experiment to make this <span class="redones">modular and multicore satshakit board was successful</span>, as you can see in the following videos:</p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/bxnmX-B9Czo" frameborder="0" allowfullscreen></iframe>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/fPvHaHXurHE" frameborder="0" allowfullscreen></iframe>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/nVHYBydPKpk" frameborder="0" allowfullscreen></iframe>

				<p>At this point I was ready to build an <span class="redones">satshakit IoT module</span>. An satshakit IoT module consist of a satshakit (normal or modular version), a satshakit power board, a <span class="redones">ESP8266 WiFi</span> module and a PIR sensor. The objective of the IoT system is to send to a smart system, data about of human presence detected by a distributed set of sensors. Here you can see some pictures about the first IoT module prototype:</p>
			
				<img class="images-default" src="img/week13/iot_module_caliper.jpg">
				<img class="images-default" src="img/week13/iot_module_hand1.jpg">
				<img class="images-default" src="img/week13/iot_module_hand2.jpg">
				
				<p>Before implementing the software for the full IoT system, I made the following schema to have a clear starting point:</p>

				<img class="images-default" src="img/week13/Iot_system.jpg">
				
				<p>Where <a href="http://practionist.eng.it/"><span class="redones-link">PRACTIcal reasONIng sySTem</span></a> is a suite of tools supporting the design and development of distributed complex systems based on the BDI model of agency. The framework provides each system component with necessary tools to interact with the environment where it lives, including cognitive capacities upon the environment and execution of actions. I'm one of the active developer of PRACTIONIST. Data received from PRACTIONIST is stored and retrieved in <span class="redones">PROLOG</span> like <span class="redones">Belief Base</span>. Here you can see two simple PRACTIONIST Prolog Like rules wrote on purpose for this IoT system:</p>

				<pre class="prettyprint lang-c">
bel(self, empty(status: A)) &lt= owner_inside(value: A)
and presence(where: main,value: A)
and presence(where: bathroom,value: A)
and presence(where: kitchen,value: A)
and presence(where: corridor,value: A)
and presence(where: entrance,value: A).
			  
bel(self, alarm(status: A, owner: B)) &lt= owner_inside(value: B) 
and ( presence(where: main,value: A) 
or presence(where: bathroom,value: A)
or presence(where: kitchen,value: A) 
or presence(where: corridor,value: A) 
or presence(where: entrance,value: A) ).
				</pre>

				<p>Also, here is the code of the PRACTIONIST plans that update the Belief Base and retrieve data for an exposed REST web service:</p>	

				<pre class="prettyprint lang-c">

/**
 * Copyright (C) 2013 Engineering Ingegneria Informatica S.p.A.
 * Research & Development Laboratory
 *
 * Licensed under the GNU LESSER GENERAL PUBLIC LICENSE, 
 * Version 3 (the "License"); you may not use this file except 
 * in compliance with the License. You may obtain a copy of the 
 * License at http://www.gnu.org/licenses/lgpl.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @author Daniele Ingrassia Company: Engineering Ingegneria Informatica S.p.A
 *         E-mail: daniele.ingrassia@eng.it
*/
package rs.fabacademy.reasoning_agent.plan.utility;

import jade.content.abs.AbsPredicate;

import java.util.HashMap;

import org.practionist.container.message.PractionistBusinessMessage;
import org.practionist.plan.library.BusinessMessageReceiverPlan;

import rs.fabacademy.RSConstants;
import rs.fabacademy.TRACE;
import rs.service.ServiceConstants;

public class UpdateDataBMPlan extends BusinessMessageReceiverPlan
{

	/*
	 * (non-Javadoc)
	 * 
	 * @see org.practionist.plan.GoalPlan#practical(org.practionist.core.Goal)
	 */
	@Override
	protected boolean practical(PractionistBusinessMessage businessMessage)
	{

		if (businessMessage.getOperation() == RSConstants.NOTIFICATION_OPERATION_UPDATE_DATA)
			return true;

		return false;
	}

	@Override
	protected void body()
	{

		TRACE.info("start");
		long time1 = System.nanoTime(), time2;

		AbsPredicate bufferBelief,bufferBelief1,templateBelief;
		
		HashMap&ltString, String&gt notificationData = (HashMap&ltString, String&gt) msg.getContent().get(0);
		String presenceData;
		String updateData = notificationData.get(ServiceConstants.PARAMETER_UPDATE_DATA);
		String updateKind = notificationData.get(ServiceConstants.PARAMETER_UPDATE_KIND);
		
		TRACE.info("updateData: "+updateData);
		TRACE.info("updateKind: "+updateKind);
		
		if(updateKind.startsWith(RSConstants.UPDATE_KIND_PRESENCE)){

			//extract presence data
			presenceData = updateKind.split("_")[1];
			
			try {
				
				templateBelief = new AbsPredicate(RSConstants.BELIEF_PRESENCE_HEAD);
				templateBelief.set("where",presenceData);
				remove(templateBelief);
				
				bufferBelief = new AbsPredicate(RSConstants.BELIEF_PRESENCE_HEAD);
				bufferBelief.set("where",presenceData);
				bufferBelief.set("value",updateData);
				add(bufferBelief);
				
			} catch (Exception e) {
				
				e.printStackTrace();
				TRACE.info("error predicates UPDATE_KIND_PRESENCE");
			
			}
			
		}else
		if(updateKind.equals(RSConstants.UPDATE_KIND_DOOR)){
			
			try{
			
				templateBelief = new AbsPredicate(RSConstants.BELIEF_DOOR_HEAD);
				templateBelief.set("value", "open");
				remove(templateBelief);
				
				templateBelief = new AbsPredicate(RSConstants.BELIEF_DOOR_HEAD);
				templateBelief.set("value", "close");
				remove(templateBelief);
			
				bufferBelief = new AbsPredicate(RSConstants.BELIEF_DOOR_HEAD);
				bufferBelief.set("value",updateData);
				add(bufferBelief);
			
			} catch (Exception e) {
			
				e.printStackTrace();
				TRACE.info("error predicates UPDATE_KIND_DOOR");
		
			}
			
		}else
		if(updateKind.equals(RSConstants.UPDATE_KIND_DOOR_PRESENCE)){
				
			try{
				
				templateBelief = new AbsPredicate(RSConstants.BELIEF_DOOR_PRESENCE_HEAD);
				templateBelief.set("value","true");
				remove(templateBelief);
				
				templateBelief = new AbsPredicate(RSConstants.BELIEF_DOOR_PRESENCE_HEAD);
				templateBelief.set("value","false");
				remove(templateBelief);
			
				bufferBelief = new AbsPredicate(RSConstants.BELIEF_DOOR_PRESENCE_HEAD);
				bufferBelief.set("value",updateData);
				add(bufferBelief);
			
			} catch (Exception e) {
			
				e.printStackTrace();
				TRACE.info("error predicates UPDATE_KIND_DOOR_PRESENCE");
		
			}
				
		}else	
		if(updateKind.equals(RSConstants.UPDATE_KIND_OWNER_INSIDE)){
				
			try{
				
				templateBelief = new AbsPredicate(RSConstants.BELIEF_OWNER_INSIDE_HEAD);
				templateBelief.set("value","true");
				remove(templateBelief);
				
				templateBelief = new AbsPredicate(RSConstants.BELIEF_OWNER_INSIDE_HEAD);
				templateBelief.set("value","false");
				remove(templateBelief);
			
				bufferBelief = new AbsPredicate(RSConstants.BELIEF_OWNER_INSIDE_HEAD);
				bufferBelief.set("value",updateData);
				add(bufferBelief);
			
			} catch (Exception e) {
			
				e.printStackTrace();
				TRACE.info("error predicates UPDATE_KIND_OWNER_INSIDE");
		
			}
				
		}	

		time2 = System.nanoTime() - time1;
		TRACE.info(time2 + "");
		TRACE.info("end");

		setSucceed();

	}

}
				</pre>

				
				<pre class="prettyprint lang-c">
				
/**
 * Copyright (C) 2013 Engineering Ingegneria Informatica S.p.A.
 * Research & Development Laboratory
 *
 * Licensed under the GNU LESSER GENERAL PUBLIC LICENSE, 
 * Version 3 (the "License"); you may not use this file except 
 * in compliance with the License. You may obtain a copy of the 
 * License at http://www.gnu.org/licenses/lgpl.txt
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @author Daniele Ingrassia Company: Engineering Ingegneria Informatica S.p.A
 *         E-mail: daniele.ingrassia@eng.it
*/
package rs.fabacademy.reasoning_agent.plan.utility;

import jade.content.abs.AbsPredicate;

import java.util.HashMap;

import org.practionist.belief.AbsPredicateFactory;
import org.practionist.container.message.PractionistBusinessMessage;
import org.practionist.plan.PlanExecutionException;
import org.practionist.plan.library.BusinessMessageReceiverPlan;

import rs.fabacademy.RSConstants;
import rs.fabacademy.TRACE;
import rs.service.AbsPredicateObject;
import rs.service.Alarm;
import rs.service.Empty;
import rs.service.ServiceConstants;

import com.google.gson.Gson;

public class GetDataBMPlan extends BusinessMessageReceiverPlan
{

	/*
	 * (non-Javadoc)
	 * 
	 * @see org.practionist.plan.GoalPlan#practical(org.practionist.core.Goal)
	 */
	@Override
	protected boolean practical(PractionistBusinessMessage businessMessage)
	{

		if (businessMessage.getOperation() == RSConstants.NOTIFICATION_OPERATION_GET_DATA)
			return true;

		return false;
	}

	@Override
	protected void body()
	{

		TRACE.info("start");
		long time1 = System.nanoTime(), time2;

		Alarm alarm = new Alarm();
		Empty empty = new Empty();
		
		AbsPredicate bufferBelief,bufferBeliefs[];
		Gson bufferGson = new Gson();
		
		HashMap&ltString, String&gt notificationData = (HashMap&ltString, String&gt) msg.getContent().get(0);
		String dataKind = notificationData.get(ServiceConstants.PARAMETER_GET_DATA_KIND);

		if(dataKind.equals("empty")){
			
		bufferBelief = AbsPredicateFactory.create(RSConstants.BELIEF_EMPTY.replace("A", "false"));
									
			try {
				
				bufferBeliefs = retrieveAllAbsPredicates(bufferBelief,true);
				
				if(bufferBeliefs == null){
					
					TRACE.info("NOT EMPTY");
					
					empty.empty = "false";
					
					RSConstants.PRACTIONIST_RESPONSE.add(empty);
					
				}else{
					
					TRACE.info("EMPTY");
					
					empty.empty = "true";
					
					RSConstants.PRACTIONIST_RESPONSE.add(empty);
					
				}
				
			} catch (PlanExecutionException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
				
				RSConstants.PRACTIONIST_RESPONSE.add("Belief base error");
				
			}	
			
			
			
		}else
		if(dataKind.equals("alarm")){
				
			bufferBelief = AbsPredicateFactory.create(RSConstants.BELIEF_ALARM.replace("A", "true").replace("B", "false"));
											
				try {
						
					bufferBeliefs = retrieveAllAbsPredicates(bufferBelief,true);
						
					if(bufferBeliefs != null){
							
						TRACE.info("ALARM true");
						
						alarm.alarm = "true";
						
						RSConstants.PRACTIONIST_RESPONSE.add(alarm);
							
					}else{
							
						TRACE.info("ALARM false");
						alarm.alarm = "false";
						RSConstants.PRACTIONIST_RESPONSE.add(alarm);
							
					}
						
				} catch (PlanExecutionException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
						
					RSConstants.PRACTIONIST_RESPONSE.add("Belief base error");
						
				}	
					
					
					
		}else
		if(dataKind.equals("all")){
			
			Object AllPredicates[] = getBeliefBase().all().toArray();
			AbsPredicateObject APOS[] = new AbsPredicateObject[AllPredicates.length];	
				
			for(int C=0;C&ltAllPredicates.length;C++){

			System.out.println("Predicate "+C+": "+AllPredicates[C].toString());
			
			APOS[C] = new AbsPredicateObject("");
			APOS[C].fromAbsPredicate((AbsPredicate)AllPredicates[C]);
			
			}
			
			RSConstants.PRACTIONIST_RESPONSE.add(APOS);
			
		}else
			RSConstants.PRACTIONIST_RESPONSE.add("invalid data kind");

		
		
		
		
		//retrieveAbsPredicate(AbsPredicateFactory.create());

		time2 = System.nanoTime() - time1;
		TRACE.info(time2 + "");
		TRACE.info("end");

		setSucceed();

	}

}


				</pre>

				<p><a href="http://eclipse.org/jetty/"><span class="redones-link">Jetty webserver</span></a> was launched on my notebook, in order to be used as <span class="redones">gateaway</span>. IoT modules are able to make an HTTP GET request to Jetty web server with the following sketch:</p>

				<pre class="prettyprint lang-c">


    #include &ltSoftwareSerial.h&gt
    #define DEBUG false
    
    SoftwareSerial mySerial(9,10);
    
    String cipSend,startConnection,domain,port,getRequest,path,parameters;
    boolean presence,bufferPresence;
    
    void setup(){
      
      Wire.begin();
      
      pinMode(2,INPUT);
      pinMode(13,OUTPUT);
      
      presence = false;
      bufferPresence = false;
          
      Serial.begin(9600); 
      
      if(DEBUG)
        mySerial.begin(9600); 

      domain = "192.168.1.90";
      path="";
      parameters="";
      port = "8080";

      sendData("AT+RST\r\n",5000,DEBUG);
      sendData("AT+CWMODE=1\r\n",5000,DEBUG);
      sendData("AT+CWJAP=\"opendot\",\"xxxx\"\r\n",30000,DEBUG);
            
      if(DEBUG)      
        mySerial.println("end setup");
      
    }
    
    void loop(){
          
      if(digitalRead(2))
        bufferPresence = true;
      else
        bufferPresence = false;
        
      if(bufferPresence != presence){
      
        presence = bufferPresence;
        
       if(DEBUG)  
        mySerial.println("presence changed");
        
        if(presence){
          parameters = "?presence5=true";
          digitalWrite(13, HIGH);
        }else{
          parameters = "?presence5=false";
          digitalWrite(13, LOW);  
        }     
                
        startConnection = "AT+CIPSTART=\"TCP\",\"" + domain + "\","+port+"\r\n";
        sendData(startConnection,5000,DEBUG);
      
        getRequest = "GET /"+parameters+" HTTP/1.1\r\nHost:"+domain+":"+port+"\r\n\r\n";
      
        cipSend = "AT+CIPSEND=";
        cipSend += getRequest.length();
        cipSend += "\r\n";
      
        sendData(cipSend,5000,DEBUG);     
        sendData(getRequest,5000,DEBUG);
      
        delay(30000);
      
        sendData("AT+CIPCLOSE\r\n",5000,DEBUG);
      
        delay(5000);    
          
      }else{
        if(DEBUG) 
          mySerial.print("presence not changed");
      }
      delay(1000);
      
      
    }
   
   
    String sendData(String command, const int timeout, boolean debug){
      
      String response = "";
      
      Serial.print(command);
      mySerial.print("Command: "+command);
      
      long int time = millis();
      
      while((time+timeout) > millis()){
        
        while(Serial.available()){
          
          char c = Serial.read(); 
          response+=c;
        
        }  
      }
      
      if(debug){
       
        mySerial.print("response: "); 
        mySerial.print(response);
      }
      
      return response;
    
  }

				</pre>

				<p><br>To be noted that every module has its own specific URL parameter. Also, the gateaway enrich these parameters with better identifiers. These because the gateaway know where the IoT module are. Here you can see the principal java class implementing the Jetty web server:</p>

				<pre class="prettyprint lang-c">

package rs.service;



import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;

import rs.fabacademy.RestClient;
import rs.fabacademy.RestClient.RequestMethod;

import com.google.gson.Gson;
 
public class HttpRequestHandler extends AbstractHandler {

	private Gson bufferGson;
	private Response bufferResponse;
	private String parameter,requestUrl;
	private RestClient restClient;
	
	public HttpRequestHandler(){
		
		bufferGson = new Gson();
		bufferResponse = new Response();
				
	}
	
	@Override
    public void handle(String target, Request baseRequest, HttpServletRequest request, 
    HttpServletResponse response) throws IOException, ServletException {
    		
    	response.setContentType("application/json;charset=utf-8");
        response.setStatus(HttpServletResponse.SC_OK);
        baseRequest.setHandled(true);
        bufferResponse.reset();
    	
    	System.out.println("Parameters received-> " + request.getParameterMap().toString());
    	
    	requestUrl = "http://"+ServiceConstants.PRACTIONIST_HOST+":"
    	+ServiceConstants.PRACTIONIST_PORT+ServiceConstants.PRACTIONIST_PATH;

		if(target.equals("/")){ 
			
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_PRESENCE_1)) 
			!= null){
				
				bufferResponse.
				setStatus(ServiceConstants.PARAMETER_PRESENCE_1+": "+parameter);
				
				requestUrl += "?";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_main";
				requestUrl += "&";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
				
				restClient = new RestClient(requestUrl);
				
				try
				{
	
					restClient.execute(RequestMethod.GET);
	
				}
				catch (Exception e)
				{
	
					e.printStackTrace();
				}
				
			}else
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_PRESENCE_2)) 
			!= null){
					
				bufferResponse.
				setStatus(ServiceConstants.PARAMETER_PRESENCE_2+": "+parameter);
				
				requestUrl += "?";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_bathroom";
				requestUrl += "&";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
				
				restClient = new RestClient(requestUrl);
				
				try
				{
	
					restClient.execute(RequestMethod.GET);
	
				}
				catch (Exception e)
				{
	
					e.printStackTrace();
				}
					
			}else
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_PRESENCE_3)) 
			!= null){
					
				bufferResponse.
				setStatus(ServiceConstants.PARAMETER_PRESENCE_3+": "+parameter);
				
				requestUrl += "?";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_kitchen";
				requestUrl += "&";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
				
				restClient = new RestClient(requestUrl);
				
				try
				{
	
					restClient.execute(RequestMethod.GET);
	
				}
				catch (Exception e)
				{
	
					e.printStackTrace();
				}
						
			}else
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_PRESENCE_4)) 
			!= null){
					
					bufferResponse.
					setStatus(ServiceConstants.PARAMETER_PRESENCE_4+": "+parameter);
					
					requestUrl += "?";
					requestUrl += 
					ServiceConstants.
					PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_corridor";
					requestUrl += "&";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
					
					restClient = new RestClient(requestUrl);
					
					try
					{
		
						restClient.execute(RequestMethod.GET);
		
					}
					catch (Exception e)
					{
		
						e.printStackTrace();
					}
							
			}else
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_PRESENCE_5)) 
			!= null){
				
				requestUrl += "?";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_entrance";
				requestUrl += "&";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
				
				restClient = new RestClient(requestUrl);
				
				try
				{
	
					restClient.execute(RequestMethod.GET);
	
				}
				catch (Exception e)
				{
	
					e.printStackTrace();
				}
					
					bufferResponse.
					setStatus(ServiceConstants.PARAMETER_PRESENCE_5+": "+parameter);
							
			}else
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_DOOR)) 
			!= null){
					
					bufferResponse.
					setStatus(ServiceConstants.PARAMETER_DOOR+": "+parameter);
					
					requestUrl += "?";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=door";
					requestUrl += "&";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
					
					restClient = new RestClient(requestUrl);
					
					try
					{
		
						restClient.execute(RequestMethod.GET);
		
					}
					catch (Exception e)
					{
		
						e.printStackTrace();
					}
					
							
			}else	
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_DOOR_PRESENCE)) 
			!= null){
					
					bufferResponse.
					setStatus(ServiceConstants.PARAMETER_DOOR_PRESENCE+": "+parameter);
					
					requestUrl += "?";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=doorPresence";
					requestUrl += "&";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
					
					restClient = new RestClient(requestUrl);
					
					try
					{
		
						restClient.execute(RequestMethod.GET);
		
					}
					catch (Exception e)
					{
		
						e.printStackTrace();
					}
							
			}else
			if( 
			(parameter = request.getParameter(ServiceConstants.PARAMETER_OWNER_INSIDE)) 
			!= null){
					
					bufferResponse.
					setStatus(ServiceConstants.PARAMETER_OWNER_INSIDE+": "+parameter);
					
					requestUrl += "?";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=ownerInside";
					requestUrl += "&";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
					
					restClient = new RestClient(requestUrl);
					
					try
					{
		
						restClient.execute(RequestMethod.GET);
		
					}
					catch (Exception e)
					{
		
						e.printStackTrace();
					}
							
			}else	
				bufferResponse.setError("invalid parameters");	       
			
		}else
			bufferResponse.setError("invalid path");

	
		 response.getWriter().
		 println(bufferGson.toJson(bufferResponse).replace("\\\"", "\""));
		
    }
 
}
				</pre>

				<p>Here you can see all the modules powered on and ready to be used:</p>
				<img class="images-default" src="img/week13/iot_modules.jpg">
				
				<p>I made also a multicore satshakit IoT module, in which a satshakit act as a master and reads the PIR sensor value from a slave one:</p>

				<img class="images-default" src="img/week13/multicore_iot.jpg">
				
				<p>Here you can see the sketch I used on the master of this IoT module:</p>

				<pre class="prettyprint lang-c">

    #include &ltSoftwareSerial.h&gt
    #include &ltWire.h&gt
    #define DEBUG true
    
    SoftwareSerial mySerial(9,10);
    
    String cipSend,startConnection,domain,port,getRequest,path,parameters;
    boolean presence,bufferPresence;
    char fromSlave;
    
    void setup(){
      
      Wire.begin();
      
      pinMode(13,OUTPUT);
      
      presence = false;
      bufferPresence = false;
          
      Serial.begin(9600); 
      
      if(DEBUG)
        mySerial.begin(9600); 

      domain = "192.168.1.90";
      path="";
      parameters="";
      port = "8080";

      sendData("AT+RST\r\n",5000,DEBUG);
      sendData("AT+CWMODE=1\r\n",5000,DEBUG);
      sendData("AT+CWJAP=\"opendot\",\"xxxxxx\"\r\n",30000,DEBUG);
            
      if(DEBUG)      
        mySerial.println("end setup");
      
    }
    
    void loop(){
      
      fromSlave = 'a';
      
      Wire.requestFrom(2, 6);
      
      if(Wire.available()){
      
        fromSlave = Wire.read();
        
      }
      
      if(fromSlave != 'a')
        bufferPresence = true;
      else
        bufferPresence = false;
        
      if(bufferPresence != presence){
      
        presence = bufferPresence;
        
       if(DEBUG)  
        mySerial.println("presence changed");
        
        if(presence){
          parameters = "?presence5=true";
          digitalWrite(13, HIGH);
        }else{
          parameters = "?presence5=false";
          digitalWrite(13, LOW);  
        }     
                
        startConnection = "AT+CIPSTART=\"TCP\",\"" + domain + "\","+port+"\r\n";
        sendData(startConnection,5000,DEBUG);
      
        getRequest = "GET /"+parameters+" HTTP/1.1\r\nHost:"+domain+":"+port+"\r\n\r\n";
      
        cipSend = "AT+CIPSEND=";
        cipSend += getRequest.length();
        cipSend += "\r\n";
      
        sendData(cipSend,5000,DEBUG);     
        sendData(getRequest,5000,DEBUG);
      
        delay(30000);
      
        sendData("AT+CIPCLOSE\r\n",5000,DEBUG);
      
        delay(5000);    
          
      }else{
        if(DEBUG) 
          mySerial.print("presence not changed");
      }
      delay(1000);
      
      
    }
   
   
    String sendData(String command, const int timeout, boolean debug){
      
      String response = "";
      
      Serial.print(command);
      mySerial.print("Command: "+command);
      
      long int time = millis();
      
      while((time+timeout) > millis()){
        
        while(Serial.available()){
          
          char c = Serial.read(); 
          response+=c;
        
        }  
      }
      
      if(debug){
       
        mySerial.print("response: "); 
        mySerial.print(response);
      }
      
      return response;
    
  }

				</pre>
				<p>And here is the code I uploaded on the slave satshakit in order to send sensor data to master:</p>

				<pre class="prettyprint lang-c">
#include &ltWire.h&gt

char toMaster;

void setup()
{
  Wire.begin(2);                
  Wire.onRequest(requestEvent); 
  pinMode(2,INPUT);
  
  toMaster = 'b';

}

void loop()
{
  
  delay(100);
}

void requestEvent()
{
  
  if(digitalRead(2))
     Wire.write('b');
   else 
     Wire.write('a');
                       
}
				</pre>

				<p>Here is a video where you can see the satshakit yellow led powered by my presence while I was getting near the sensor:</p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/5-wfTvfO6ss" frameborder="0" allowfullscreen></iframe>

				<p>Finally here is the <span class = "redones">final and complete test of the IoT system</span>. Due to a weak WiFi not all modules were able to quickly communicate with gateaway and server: </p>
				<iframe width="700" height="450" src="https://www.youtube.com/embed/gabnJ0VTCmk" frameborder="0" allowfullscreen></iframe>

				<p>After a while other GET requests were coming...</p>

				<img class="images-default" src="img/week13/calls.jpg">

				<p>Here you can see the <span class = "redones">json output</span> of the PRACTIONIST REST web service. Data is updated in realtime while is perceived by satshakit IoT modules.</p>

				<pre class="prettyprint lang-c">
[
   {
      "kind":"door",
      "parameters":[
         "value"
      ],
      "values":[
         "close"
      ]
   },
   {
      "kind":"door_presence",
      "parameters":[
         "value"
      ],
      "values":[
         "false"
      ]
   },
   {
      "kind":"owner_inside",
      "parameters":[
         "value"
      ],
      "values":[
         "false"
      ]
   },
   {
      "kind":"presence",
      "parameters":[
         "where",
         "value"
      ],
      "values":[
         "corridor",
         "false"
      ]
   },
   {
      "kind":"presence",
      "parameters":[
         "where",
         "value"
      ],
      "values":[
         "main",
         "true"
      ]
   },
   {
      "kind":"presence",
      "parameters":[
         "where",
         "value"
      ],
      "values":[
         "bathroom",
         "true"
      ]
   },
   {
      "kind":"presence",
      "parameters":[
         "where",
         "value"
      ],
      "values":[
         "entrance",
         "false"
      ]
   },
   {
      "kind":"presence",
      "parameters":[
         "where",
         "value"
      ],
      "values":[
         "kitchen",
         "true"
      ]
   }
]
				</pre>

				<p><br>Here you can download eagle projects of <a href="drawings/week13/eagle_satshakit_modular.zip"><span class="redones-link">satshakit multicore & modular</span></a> and <a href="drawings/week13/eagle_satshakit_power_board.zip"><span class="redones-link">satshakit power board</span></a>.</p>
				<p>Also, here you can download code I wrote for this assignment: <a href="other/IoTGateaway.rar"><span class="redones-link">IoTGateaway</span></a>, <a href="other/PRACTIONIST_FabAcademy.rar"><span class="redones-link">PRACTIONIST_FabAcademy</span></a></p>

			</div>
		</section>
		<section id= "week14" class="row">
			<div class="photo-grid">
				<p>Along this week, we've learned about <span class="redones">interface and application programming</span></p>
				<p>What I wanted to do for this week, was to improve the Internet of Things system I developed along the previous week13. This time with the objective of implement a <span class="redones">web gui</span> and to do some simple <span class="redones">data analysis</span>. Also, another improvement I desired, was to detect if a <span class="redones">specific person</span> (eg: the owner) is inside the environment where the IoT system is. In order to recognize this presence I was thinking about an <span class="redones">Android application</span> that can detect if it's inside an environment via a WiFi network.</p>

				<p>First, I modified the IoT schema as follows:</p>
				<img class="images-default" src="img/week14/iot_system_new.jpg">
				<p>As you can see this time there is also an Android smartphone. This smartphone can connect via local WiFi in order to recognize if it's inside a specific environment, and also connect via mobile internet to the remote <a href="http://practionist.eng.it/index.htm"><span class="redones-link">PRACTIcal reasONIng sySTem</span></a> (see week13 for more details).</p>
				<p>The idea behind how to recognize the owner presence is to develop an Android application that continuously probe for a fixed WiFi <span class="redones">SSID name</span>. If the SSID name is found, the app will try to connect to this WiFi network, and then will make an <span class="redones">HTTP GET request to check if in the response there is the password</span>. If the password match, the app will made another HTTP GET request to remote PRACTIONIST, in order to set it's presence to true. Otherwise, if there isn't the SSID name in the WiFi detected networks, or the password doesn't match, it will made an HTTP GET request to set it's presence to false.</p>
				<p>To implement the aforementioned behaviour, I wrote the followind Android Broadcast Receiver:</p>
				<pre class="prettyprint lang-c">
    class MyBroadcastReceiver extends BroadcastReceiver{
    	
    	public void updateOwnerPresence(){
    		
    		String ownerInside = 
    			"http://satsha.sytes.net:8080/updateData?updateKind=ownerInside&updateData=true";
    		String ownerOutside = 
    			"http://satsha.sytes.net:8080/updateData?updateKind=ownerInside&updateData=false";
    		
    		RestClient restClientPRACTIONIST; 
			RestClient restClient = new RestClient("http://10.10.10.99:8084/recognize");
			
			try{
				
				restClient.execute(RequestMethod.GET);
				
				Log.v("test",restClient.getResponse());
				
				if(restClient.getResponse().startsWith("satshakitIoT")){
					
					Log.v("test","inside");
					
					restClientPRACTIONIST = new RestClient(ownerInside);
					restClientPRACTIONIST.execute(RequestMethod.GET);
					
				}else{
					
					restClientPRACTIONIST = new RestClient(ownerOutside);
					restClientPRACTIONIST.execute(RequestMethod.GET);
					
					Log.v("test","outside");
					
				}

			}catch (Exception e){

				e.printStackTrace();
				
				restClientPRACTIONIST = new RestClient(ownerOutside);
				
				try {
					
					restClientPRACTIONIST.execute(RequestMethod.GET);
				
				}catch (Exception e1) {
					
					e1.printStackTrace();
				
				}
				
			}
    		
    	}
    	
        public void onReceive(Context c, Intent intent){
        	
        	WifiManager wifiManager = (WifiManager) c.getSystemService(Context.WIFI_SERVICE);
        	WifiInfo wifiInfo = wifiManager.getConnectionInfo();
        	if (WifiInfo.getDetailedStateOf(wifiInfo.getSupplicantState()) 
        		== NetworkInfo.DetailedState.CONNECTED) {
        		
        		Log.v("test",wifiInfo.getSSID());
        		
        		if(wifiInfo.getSSID().equals(mySSID)){
        			
        			Log.v("test","already conn");
        			updateOwnerPresence();
        			
        		}else{
        			
                	WifiConfiguration conf = new WifiConfiguration();
        	    	conf.SSID = "\"" + mySSID + "\""; 
        	    	conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
        	    	
        	    	wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE); 
        	    	wifiManager.addNetwork(conf);
        	    	
        	    	List&ltWifiConfiguration&gt list = wifiManager.getConfiguredNetworks();
        	    	for( WifiConfiguration i : list ) {
        	    	    if(i.SSID != null && i.SSID.equals("\"" + mySSID + "\"")) {
        	    	         //wifiManager.disconnect();
        	    	         wifiManager.enableNetwork(i.networkId, true);
        	    	         wifiManager.reconnect();               
        	
        	    	         break;
        	    	         
        	    	    }           
        	    	 }
        			
        	    	updateOwnerPresence();
        	    	
        		}
        	   
        	}else{
        			
    	    	WifiConfiguration conf = new WifiConfiguration();
    	    	conf.SSID = "\"" + mySSID + "\""; 
    	    	conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
    	    	
    	    	wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE); 
    	    	wifiManager.addNetwork(conf);
    	    	
    	    	List&ltWifiConfiguration&gt list = wifiManager.getConfiguredNetworks();
    	    	for( WifiConfiguration i : list ) {
    	    	    if(i.SSID != null && i.SSID.equals("\"" + mySSID + "\"")) {
    	    	         //wifiManager.disconnect();
    	    	         wifiManager.enableNetwork(i.networkId, true);
    	    	         wifiManager.reconnect();               
    	
    	    	         break;
    	    	    }           
    	    	 }
    			
    	    	updateOwnerPresence();
        		
        	}

        }
        
    }
				</pre>
				<p>This time I tried this IoT system inside my <span class="redones">residence room</span> (where I live actually here in Milan). My residence room only has three rooms: <span class="redones">entrance, bathroom and bedroom</span>. So I modified the week13's IoT Gateaway, in order to work with different rooms and to be able to send the password if the owner is inside. Here you can see the principal class of the IoT Gateaway: </p>
				<pre class="prettyprint lang-c">
package service;



import gateaway.RestClient;
import gateaway.RestClient.RequestMethod;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;

import com.google.gson.Gson;
 
public class HttpRequestHandler extends AbstractHandler {

	private Gson bufferGson;
	private Response bufferResponse;
	private String parameter,requestUrl;
	private RestClient restClient;
	
	public HttpRequestHandler(){
		
		bufferGson = new Gson();
		bufferResponse = new Response();
				
	}
	
	@Override
    public void handle(String target, Request baseRequest, 
    HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    		
    	response.setContentType("application/json;charset=utf-8");
        response.setStatus(HttpServletResponse.SC_OK);
        baseRequest.setHandled(true);
        bufferResponse.reset();
    	
    	System.out.println("Parameters received-> " + request.getParameterMap().toString());
    	
    	requestUrl = "http://"+ServiceConstants.PRACTIONIST_HOST+":"
    	+ServiceConstants.PRACTIONIST_PORT+ServiceConstants.PRACTIONIST_PATH;

		if(target.equals("/")){ 
			
			if( (parameter 
				= request.getParameter(ServiceConstants.PARAMETER_PRESENCE_1)) != null){
				
				bufferResponse.setStatus(ServiceConstants.PARAMETER_PRESENCE_1
					+": "+parameter);
				
				requestUrl += "?";
				requestUrl += ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_entrance";
				requestUrl += "&";
				requestUrl += ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
				
				restClient = new RestClient(requestUrl);
				
				try
				{
	
					restClient.execute(RequestMethod.GET);
	
				}
				catch (Exception e)
				{
	
					e.printStackTrace();
				}
				
			}else
			if( (parameter 
				= request.getParameter(ServiceConstants.PARAMETER_PRESENCE_2)) != null){
					
				bufferResponse.setStatus(ServiceConstants.PARAMETER_PRESENCE_2
					+": "+parameter);
				
				requestUrl += "?";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_bathroom";
				requestUrl += "&";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
				
				restClient = new RestClient(requestUrl);
				
				try
				{
	
					restClient.execute(RequestMethod.GET);
	
				}
				catch (Exception e)
				{
	
					e.printStackTrace();
				}
					
			}else
			if( (parameter 
				= request.getParameter(ServiceConstants.PARAMETER_PRESENCE_3)) != null){
					
				bufferResponse.setStatus(ServiceConstants.PARAMETER_PRESENCE_3
					+": "+parameter);
				
				requestUrl += "?";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=presence_bedroom";
				requestUrl += "&";
				requestUrl += 
				ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
				
				restClient = new RestClient(requestUrl);
				
				try
				{
	
					restClient.execute(RequestMethod.GET);
	
				}
				catch (Exception e)
				{
	
					e.printStackTrace();
				}
							
			}else
			if( (parameter 
				= request.getParameter(ServiceConstants.PARAMETER_OWNER_INSIDE)) != null){
					
					bufferResponse.setStatus(ServiceConstants.PARAMETER_OWNER_INSIDE
						+": "+parameter);
					
					requestUrl += "?";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_KIND+"=ownerInside";
					requestUrl += "&";
					requestUrl += 
					ServiceConstants.PRACTIONIST_PARAMETER_UPDATE_DATA+"="+parameter;
					
					restClient = new RestClient(requestUrl);
					
					try
					{
		
						restClient.execute(RequestMethod.GET);
		
					}
					catch (Exception e)
					{
		
						e.printStackTrace();
					}
							
			}else	
				bufferResponse.setError("invalid parameters");	       
			
		}else
			if(target.equals("/recognize")){
				
				response.getWriter().print("satshakitIoT");
				System.out.println("recognize received");
				return;
				
			}
				else
			bufferResponse.setError("invalid path");

	
		 response.getWriter().
		 	println(bufferGson.toJson(bufferResponse).replace("\\\"", "\""));
		
    }
 
}
				</pre>
				<p>And, according to the above modifications, also I modified the <span class="redones">PRACTIONIST code</span>. Main modifications regards implementing a data structure to memorize <span class="redones">when presence updates are perceived</span>. So I wrote the following <span class="redones">java class hierarchy</span>: </p>
				<img class="images-default" src="img/week14/class_digram.jpg">
				<p>There are also other minor modifications, that you can check by downloading the code at the bottom of this page. As starting point in develop the web gui, I drawn an SVG of the <span class="redones">residence room planimetry</span>:</p>
				<img class="images-default" src="img/week14/residence_room.svg">

				<p>I choose to made an SVG because I wanted to have the possibility to <span class="redones">change the room's colors </span> as the output indicating (or not) a presence. I separated the web gui in two main sections: <span class="redones">real time data</span> and <span class="redones">statistical data</span>. Real time data section will show the real time status of the rooms with also some general statuses, such as <span class="redones">empty</span>, <span class="redones">owner inside</span> and <span class="redones">alarm</span> (if a presence is detected and the owner is outside). The other section, statistical data, will show some charts about <span class="redones">rooms utilization</span>, and <span class="redones">owner presence</span>. The web gui is made up of <span class="redones">HTML</span> mixed with <span class="redones">javascript code</span>. I used <a href="http://getbootstrap.com/"><span class="redones-link">Bootstrap</span></a> and <a href="https://jquery.com/"><span class="redones-link">jQuery</span></a>. With jQuery I made some loops to make asynchronous HTTP GET requests to PRACTIONIST, in order to update data in real time.</p>

				<p>Here is the code doing requests for real time rooms and owner presences:</p>
				<pre class="prettyprint lang-c">
    $room_svg = $("#residence_room");
    $text_svg = $("#text");

    setInterval(function(){

       $.getJSON(

        "http://satsha.sytes.net:8080/getData?dataKind=beliefs",
        function(data){

           for(var i in data){

                if(data[i].kind == "presence"){

                    if(data[i].values[0] == "bathroom"){

                        if(data[i].values[1] == "true")
                            $("#bathroomPath", $room_svg).attr("style", "fill:"+bathroomColor);
                        else
                            $("#bathroomPath", $room_svg).attr("style", "fill:"+white);

                    } 

                    if(data[i].values[0] == "bedroom"){

                        if(data[i].values[1] == "true")
                            $("#bedroomPath", $room_svg).attr("style", "fill:"+bedroomColor);
                        else
                            $("#bedroomPath", $room_svg).attr("style", "fill:"+white);

                    }                         

                    if(data[i].values[0] == "entrance"){

                        if(data[i].values[1] == "true")
                            $("#entrancePath", $room_svg).attr("style", "fill:"+entranceColor);
                        else
                            $("#entrancePath", $room_svg).attr("style", "fill:"+white);

                    }       

                }else
                if(data[i].kind == "owner_inside"){

                    if(data[i].values[0] == "true")
                        $("#owner_string", $text_svg).text("owner: inside");
                    else
                        $("#owner_string", $text_svg).text("owner: outside");
                }

           }

          
        })
    
    }, 2000);
</pre class="prettyprint lang-c">
	<p>As you can see data is requested every 2 seconds, and is in <span class="redones">JSON</span> format. Data for the other statuses, is requested in a similar way:</p>
	<pre class="prettyprint lang-c">
       $.getJSON(

        "http://satsha.sytes.net:8080/getData?dataKind=alarm",
        function(data){

            if(data.alarm == "true")
                $("#alarm_string", $text_svg).text("alarm: true");
            else
                $("#alarm_string", $text_svg).text("alarm: false");
        
        })
    
    }, 2000);

    setInterval(function(){

       $.getJSON(

        "http://satsha.sytes.net:8080/getData?dataKind=empty",
        function(data){

            if(data.empty == "true")
                $("#empty_string", $text_svg).text("empty: true");
            else
                $("#empty_string", $text_svg).text("empty: false");
          
        })
    
    }, 2000);
	</pre>
	<p>To show statistical data I used <a href="https://developers.google.com/chart/"><span class="redones-link">Google Charts</span></a>. I used two kind of charts: a <span class="redones">bar chart</span> and a <span class="redones">pie chart</span>. I used bar chart to show rooms utilization times, and pie chart to quickly see how much time the owner is inside/outside. Here you see code to generate these charts with Google Charts apis:</p>
	<pre class="prettyprint lang-c">
function drawRoomsTimesChart(){

      var data = new google.visualization.DataTable();

      data

      var data = google.visualization.arrayToDataTable([
        
        ['room','secs',{ role: "style" }],
        ['bathroom', (bathroomTime/1000),"color: 3d85c6"],
        ['entrance', (entranceTime/1000),"color: 6aa84f"],
        ['bedroom', (bedroomTime/1000),"color: e69138"]
      
      ]);

      var options = {
        titleTextStyle: {color: "black", fontName: "monospace", fontSize: 16},
        title: "rooms utilization time",
    
        vAxis: {
          title: "secs"
        }
      };

      var chart = new google.visualization.ColumnChart(
        document.getElementById("rooms_times"));

      chart.draw(data, options);

    }

    function drawOwnerInsideChart() {

        var data = new google.visualization.DataTable();
        data.addColumn("string", "Topping");
        data.addColumn("number", "Slices");
        data.addRows([
          ["inside", ownerInside/1000],
          ["outside", ownerOutside/1000]
        ]);
     
        var options = {titleTextStyle: {color: "black", fontName: "monospace", fontSize: 16},          
                       title:"owner presence time",
                       width:400,
                       height:300,
                       is3D: true};

        var chart = new google.visualization.PieChart(document.getElementById("owner_inside"));
    
        chart.draw(data, options);

    }
</pre>
	<p>Statistical data from PRACTIONIST contains only when the updates are made. Here you can see the response for the statistical HTTP REST endpoint:</p>
<pre class="prettyprint lang-c">
{
  "entrancePresences": [
    {
      "presenceType": "entrance",
      "updateData": "true",
      "when": "2015/05/12 22:17:02"
    },
    {
      "presenceType": "entrance",
      "updateData": "false",
      "when": "2015/05/12 22:17:22"
    }
  ],
  "bathroomPresences": [
    {
      "presenceType": "bathroom",
      "updateData": "true",
      "when": "2015/05/12 22:17:09"
    }
  ],
  "bedroomPresences": [
    {
      "presenceType": "bedroom",
      "updateData": "true",
      "when": "2015/05/12 22:17:29"
    },
    {
      "presenceType": "bedroom",
      "updateData": "false",
      "when": "2015/05/12 22:17:36"
    }
  ],
  "ownerPresences": [
    {
      "updateData": "false",
      "when": "2015/05/12 21:56:50",
      "updateKind": "owner"
    },
    {
      "updateData": "true",
      "when": "2015/05/12 21:57:40",
      "updateKind": "owner"
    }
  ]
}
</pre>	
<p>So inside the code that makes requests for statistical data, I also implemented the code for getting <span class="redones">times intervals</span>:</p>
<pre class="prettyprint lang-c">
    setInterval(function(){

       $.getJSON(

        "http://satsha.sytes.net:8080/getData?dataKind=statistical",
        function(data){

           if(chartsOk){

                var bufferDate1;
                var bufferDate2;
    
                roomEmptyTime = 0;
                roomNotEmptyTime = 0;
                ownerInside = 0;
                ownerOutside = 0;
                bathroomTime = 0;
                entranceTime = 0;
                bedroomTime = 0;

                var lastFalse = "";
                var lastTrue = "";

                //calculate residence room times
                
                lastFalse = "";
                lastTrue = "";
                
                for(var i in data.bathroomPresences){

                    if(data.bathroomPresences[i].updateData == "false")    
                        lastFalse = data.bathroomPresences[i].when;
                    else                    
                    if(data.bathroomPresences[i].updateData == "true")
                        lastTrue = data.bathroomPresences[i].when;

                    if(lastTrue.length > 0 && lastFalse.length > 0){

                        bufferDate1 = new Date(lastTrue).getTime();
                        bufferDate2 = new Date(lastFalse).getTime();

                        if(bufferDate2 > bufferDate1){
                            
                            bathroomTime += bufferDate2 - bufferDate1;
                            lastTrue = "";

                        }else{
                           
                            lastFalse = "";

                        }

                    }

                }

                lastFalse = "";
                lastTrue = "";
                
                for(var i in data.entrancePresences){

                    if(data.entrancePresences[i].updateData == "false")    
                        lastFalse = data.entrancePresences[i].when;
                    else                    
                    if(data.entrancePresences[i].updateData == "true")
                        lastTrue = data.entrancePresences[i].when;

                    if(lastTrue.length > 0 && lastFalse.length > 0){

                        bufferDate1 = new Date(lastTrue).getTime();
                        bufferDate2 = new Date(lastFalse).getTime();

                        if(bufferDate2 > bufferDate1){
                            
                            entranceTime += bufferDate2 - bufferDate1;
                            lastTrue = "";

                        }else{
                           
                            lastFalse = "";

                        }

                    }

                }

                lastFalse = "";
                lastTrue = "";
                
                for(var i in data.bedroomPresences){

                    if(data.bedroomPresences[i].updateData == "false")    
                        lastFalse = data.bedroomPresences[i].when;
                    else                    
                    if(data.bedroomPresences[i].updateData == "true")
                        lastTrue = data.bedroomPresences[i].when;

                    if(lastTrue.length > 0 && lastFalse.length > 0){

                        bufferDate1 = new Date(lastTrue).getTime();
                        bufferDate2 = new Date(lastFalse).getTime();

                        if(bufferDate2 > bufferDate1){
                            
                            bedroomTime += bufferDate2 - bufferDate1;
                            lastTrue = "";

                        }else{
                           
                            lastFalse = "";

                        }

                    }

                }


                //calculate owner times
                lastFalse = "";
                lastTrue = "";

                for(var i in data.ownerPresences){

                    if(data.ownerPresences[i].updateData == "false")    
                        lastFalse = data.ownerPresences[i].when;
                    else                    
                    if(data.ownerPresences[i].updateData == "true")
                        lastTrue = data.ownerPresences[i].when;

                    if(lastTrue.length > 0 && lastFalse.length > 0){

                        bufferDate1 = new Date(lastTrue).getTime();
                        bufferDate2 = new Date(lastFalse).getTime();

                        if(bufferDate2 > bufferDate1){
                            
                            ownerInside += bufferDate2 - bufferDate1;
                            lastTrue = "";

                        }else{
                           
                            ownerOutside += bufferDate1 - bufferDate2;
                            lastFalse = "";

                        }

                    }

                }

                //redraw charts
                drawOwnerInsideChart();
                drawRoomsTimesChart();
           
           }
          
        })
    
    }, 4000);

</pre>
<p>I decided to reuse <span class="redones">satshakit IoT modules</span> and sketch code of week13. Here you can see the sketch code:</p> 
<pre class="prettyprint lang-c">
    #include &ltSoftwareSerial.h&gt
    #define DEBUG false
    
    SoftwareSerial mySerial(9,10);
    
    String cipSend,startConnection,domain,port,getRequest,path,parameters;
    boolean presence,bufferPresence;
    
    void setup(){
      
      Wire.begin();
      
      pinMode(2,INPUT);
      pinMode(13,OUTPUT);
      
      presence = false;
      bufferPresence = false;
          
      Serial.begin(9600); 
      
      if(DEBUG)
        mySerial.begin(9600); 

      domain = "10.10.10.99";
      path="";
      parameters="";
      port = "8084";

      sendData("AT+RST\r\n",5000,DEBUG);
      sendData("AT+CWMODE=1\r\n",5000,DEBUG);
      sendData("AT+CWJAP=\"mySSID\",\"xxxx\"\r\n",30000,DEBUG);
            
      if(DEBUG)      
        mySerial.println("end setup");
      
    }
    
    void loop(){
          
      if(digitalRead(2))
        bufferPresence = true;
      else
        bufferPresence = false;
        
      if(bufferPresence != presence){
      
        presence = bufferPresence;
        
       if(DEBUG)  
        mySerial.println("presence changed");
        
        if(presence){
          parameters = "?presence5=true";
          digitalWrite(13, HIGH);
        }else{
          parameters = "?presence5=false";
          digitalWrite(13, LOW);  
        }     
                
        startConnection = "AT+CIPSTART=\"TCP\",\"" + domain + "\","+port+"\r\n";
        sendData(startConnection,5000,DEBUG);
      
        getRequest = "GET /"+parameters+" HTTP/1.1\r\nHost:"+domain+":"+port+"\r\n\r\n";
      
        cipSend = "AT+CIPSEND=";
        cipSend += getRequest.length();
        cipSend += "\r\n";
      
        sendData(cipSend,5000,DEBUG);     
        sendData(getRequest,5000,DEBUG);
      
        delay(30000);
      
        sendData("AT+CIPCLOSE\r\n",5000,DEBUG);
      
        delay(5000);    
          
      }else{
        if(DEBUG) 
          mySerial.print("presence not changed");
      }
      delay(1000);
      
      
    }
   
   
    String sendData(String command, const int timeout, boolean debug){
      
      String response = "";
      
      Serial.print(command);
      mySerial.print("Command: "+command);
      
      long int time = millis();
      
      while((time+timeout) > millis()){
        
        while(Serial.available()){
          
          char c = Serial.read(); 
          response+=c;
        
        }  
      }
      
      if(debug){
       
        mySerial.print("response: "); 
        mySerial.print(response);
      }
      
      return response;
    
  }
</pre>
<p>So I placed the IoT modules inside my residence room:</p>
<img class="images-default" src="img/week14/entrance.jpg">
<img class="images-default" src="img/week14/bedroom.jpg">
<img class="images-default" src="img/week14/bathroom.jpg">

<p>At the end this is the <span class="redones">resulting web gui</span>, while it's perceiving data from PRACTIONIST:</p>
<img class="images-default" src="img/week14/gui.jpg">
<p>Also here is screen capture video, that shows the web gui <span class="redones">while it's working</span>:</p>

<iframe width="700" height="450" src="https://www.youtube.com/embed/89mAAhVE-Lw" frameborder="0" allowfullscreen></iframe>

<p>Here you can download the code I wrote for this assignment: <a href="other/web_gui.rar"><span class="redones-link">web gui</span></a>, <a href="other/PRACTIONIST_FabAcademy_new.rar"><span class="redones-link">PRACTIONIST_FabAcademy</span></a>, <a href="other/IoTGateaway_new.rar"><span class="redones-link">IoT Gateaway</span></a>, <a href="other/OwnerPresenceApp.rar"><span class="redones-link">Owner presence Android app</span></a>.</p>

			</div>
		</section>
		<section id= "week15" class="row">
			<div class="photo-grid">
				<p>week15 mechanical design, machine design</p>
			</div>
		</section>
		<section id= "week16" class="row">
			<div class="photo-grid">
				<p>week16 applications and implications</p>
			</div>
		</section>
		<section id= "week17" class="row">
			<div class="photo-grid">
				<p>week17 invention, intellectual property, and income</p>
			</div>
		</section>
		<section id= "week18" class="row">
			<div class="photo-grid">
				<p>week18 project development</p>
			</div>
		</section>
		<section id= "week19" class="row">
			<div class="photo-grid">
				<p>week19 project presentation</p>
			</div>
		</section>

		<section id= "project1" class="row">
			<div class="photo-grid">
				<p>Final Project: <span class="redones">concept</span></p>

				<p>
				We are by now invaded by <span class="redones">Unmanned Aerial Vehicles</span>. They spread everywhere and for whatever kind of use, from taking an aerial video of a party to flying over a raging forest fire alerting firefighters, from hovering over a construction site conducting a building inspection to exploring dangerous places like war sites.</p>

				<img class="images" src="img/drone_fire.jpeg">
				<img class="images" src="img/drone_inspect.jpeg">
			
				<p>The use of such flying robotics in the form of small UAVs, also known as <span class="redones">drones</span>, is pervasive now but not only: its <span class="redones">commercial growth</span> is predicted to <span class="redones">significantly increase</span> and reach several tens billions of dollars worldwide over the next years.</p>
				<img class="images1" src="img/drones_market.jpeg">
				
				<p>However, in order to achieve this market increase, a multitude of <span class="redones">issues</span> needs to be addressed and several <span class="redones">improvements</span> need to be done. For example, talking about security, the drones on the market today don’t have anything that complain with obstacle avoidance, so they easily get crashed on people and things by inexperienced pilots. Furthermore, they don’t present any kind of mechanism to cooperate each other, or to obtain smarter behaviours.</p>
				<img class="images" src="img/drone_crash.jpg">

				
				<ul class="lists">
				<li>Accordingly to above examples, and due to my interest on <span class="redones">A.I.</span>, what I want to do is to make a drone with such capabilities. So my goal is to acquire all the know-how on the today’s drones to build a <span class="redones">smart quadcopter</span> that offers the following extras:</li>
				<li><span class="redones">obstacle avoidance</span></li>
				<li><span class="redones">cooperation capabilities</span></li>
				</ul>
				<p>The concept of cooperation I want to realize is intended as another use of the drones:  <span class="redones">the drones as building block material</span> that can be modularly and autonomously assembled.
				In this direction I think at this quadcopter like a normal one, but equipped with <span class="redones">advanced</span> hardware and software <span class="redones">components</span>, and surrounded by a cage, in order to apply more sensors and to enable an autonomous assembly behaviour. I think about the cage as a <span class="redones">light cubic frame</span> for simplicity of drones assembling.</p>
				
				<p> The acronym I have chosen for this drone is <span class="redones"> AAVOID</span>:<span class="redones"> A</span>utonomous <span class="redones"> A</span>ssembly a<span class="redones">VOI</span>ding <span class="redones">D</span>rone</p>
				
				<p>Here is a draft schema of the <span class="redones">Control Unit</span>'s hardware architecture:</p>
				<img class="images-default" src="img/final_project/AAVOID_CU.png" style="background-color:white;width: 65%;"></p>

			</div>
		</section>
		<section id= "project2" class="row">
			<div class="photo-grid">
				<p>Hardware: <span class="redones">flight controller</span></p>
				<p>The developing of AAVOID flight controller goes through several steps. I will use the flight controller as the interface to <span class="redones">access and control low level drone hardware</span>, such as motors, accelerometer etc. Due to the fact that flight controller and actuators & sensors board share the same core architecture, I will use the work done for flight controller as the starting point to develop the sensors & actuators board.</p> 

				<p>One of the my firts ideas was to use the <span class="redones">ATMega2560</span> microcontroller, as you can see from the old AAVOID Control Unit architecture:</p>

				<img class="images-default" src="img/final_project/1/fligh_controller_old.jpg">

				<p>In order to pursue this idea, first I wanted to know if I was able to <span class="redones">proper solder</span> the 100 pins of this big microcontroller. Also, I needed FDTI and USB part of the circuit in order to test it completely. So I made, with our Trotec Speedy100 Flexx, <span class="redones">three different breakout boards</span>, ATMega2560, FTDI FT232RL and USB.</p>

				<p>Here are screens about eagle schematics:</p>
				
				<img class="images-default" src="img/final_project/1/usb_schematic.png">
				<img class="images-default" src="img/final_project/1/ft232rl_schematic.png">
				<img class="images-default" src="img/final_project/1/2560_schematics.jpg">

				<p>Here you can see screens about eagle boards:</p>

				<img class="images-default" src="img/final_project/1/usb_board.png">
				<img class="images-default" src="img/final_project/1/ft233rl_board.png">
				<img class="images-default" src="img/final_project/1/2560_board.png">

				<p>Here you can download the eagle projects of the breakboards plus the svg files ready to be printed: <a href="drawings/final_project/1/breakboards.rar"><span class="redones-link" >download</span></a>.</p>

				<p>Attempts to solder ATMega2560 and FT232RL failed, due to, now recognized, my error in apply too much flux. The USB breakboard was ok. Here you can see some pictures about the results and test circuits:</p>

				<img class="images-default" src="img/final_project/1/usb_soldering.jpg">
				<img class="images-default" src="img/final_project/1/usb_real.jpg">
				<img class="images-default" src="img/final_project/1/ft232rl_positioning.jpg">
				<img class="images-default" src="img/final_project/1/ft232rl_real_.jpg">
				<img class="images-default" src="img/final_project/1/ft232rl_full.jpg">

				<p>A short circuit cause some smoke exiting from FT232RL pins, so I quickly detached USB cable from PC..:</p>

				<img class="images-default" src="img/final_project/1/ft232rl_explosion.jpg">

				<p>Here you can see the attemps with ATMega2560, from positioning to test circuit:</p>

				<img class="images-default" src="img/final_project/1/2560_resin.jpg">
				<img class="images-default" src="img/final_project/1/2560_positioning.jpg">
				<img class="images-default" src="img/final_project/1/2560_flux.jpg">
				
				<img class="images-default" src="img/final_project/1/2560_real.jpg">
				<img class="images-default" src="img/final_project/1/2560_full.jpg">

				<p>I never managed to past the fuses step while programming the ATMega2560:</p>

				<img class="images-default" src="img/final_project/1/2560_fuses.png">
				
				<p>As I developed a general purpose Arduino compatible board, the <a href="https://github.com/satshas/satshakit"><span class="redones-link">satshakit</span></a>, I decided to use it as my flight controller board. As communication and the programming communication I will use an <span class="redones">USB FTDI 5V cable</span>. With this cable I don't need anymore the FT232RL chip.</p>

				<p>With satshakit, multiwii and quadcopter hardware I've done several <span class="redones">successful experimentation</span>. You can read more in the <a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week11').innerHTML,'week11')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">output devices assignment</span></a> section. Here is a video about controlling ESCs and motors with satshakit:</p>

				<iframe width="700" height="450" src="https://www.youtube.com/embed/kZMLoyP47z4" frameborder="0" allowfullscreen></iframe>

			</div>
		</section>
		<section id= "project3" class="row">
			<div class="photo-grid">
				<p>project3: system</p>
			</div>
		</section>
		<section id= "project4" class="row">
			<div class="photo-grid">
				<p>project4: v0.1</p>
			</div>
		</section>

		<section id= "middle" class="row">
			<div class="col-full">
			</div>
		</section>

		<section id= "exercises" class="row">
			<div class="photo-grid">
				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week1').innerHTML,'week1')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">1. principles and practices, project management</span></a>

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week2').innerHTML,'week2')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">2. computer-aided design</span></a>

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week3').innerHTML,'week3')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">3. computer-controlled cutting</span></a>

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week4').innerHTML,'week4')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">4. electronics production</span></a>

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week5').innerHTML,'week5')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">5. 3D scanning and printing</span></a>
				

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week6').innerHTML,'week6')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">6. electronics design</span></a>
				

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week7').innerHTML,'week7')" rel="lightbox" class="col-2" style="font-weight: bold;"><span class="redones">7. embedded programming</span></a>

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week8').innerHTML,'week8')" rel="lightbox" class="col-2" style="font-weight: bold;"><span class="redones">8. computer-controlled machining</span></a>


				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week9').innerHTML,'week9')" rel="lightbox" class="col-2" style="font-weight: bold;"><span class="redones">9. molding and casting</span></a>
				

				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week10').innerHTML,'week10')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">10. input devices</span></a>
				
				
				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week11').innerHTML,'week11')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">11. output devices</span></a>
				
				
				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week12').innerHTML,'week12')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">12. composites</span></a>
				
				
				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week13').innerHTML,'week13')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">13. networking and communications</span></a>
				
				
				<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week14').innerHTML,'week14')" rel="lightbox" class="col-2"><span class="redones" style="font-weight: bold;">14. interface and application programming</span></a>

				<!--<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week15').innerHTML,'week15')" rel="lightbox" class="col-2">interface and application programming</a>-->
				<a class="col-2">15. mechanical design, machine design</a>
				
				<!--<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week16').innerHTML,'week16')" rel="lightbox" class="col-2">applications and implications</a>-->
				<a class="col-2">16. applications and implications</a>
				
				<!--<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week17').innerHTML,'week17')" rel="lightbox" class="col-2">invention, intellectual property, and income</a>-->
				<a class="col-2">17. invention, intellectual property, and income</a>
				
				<!--<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week18').innerHTML,'week18')" rel="lightbox" class="col-2">project development</a>-->
				<a class="col-2">18. project development</a>
				
				<!--<a href="javascript:ReplaceContentInContainer('middle',document.getElementById('week19').innerHTML,'week19')" rel="lightbox" class="col-2">project presentation</a>-->
				<a class="col-2">19. project presentation</a>

			</div>
		</section>

		<section class="row">
			
			<canvas id="cv" width=640 height=480>
				It seems you are using an outdated browser that does not support canvas :-(
			</canvas>
			<canvas id="cv1" width=640 height=480>
				It seems you are using an outdated browser that does not support canvas :-(
			</canvas>
			<canvas id="cv2" width=640 height=480>
				It seems you are using an outdated browser that does not support canvas :-(
			</canvas>
			<canvas id="cv3" width=640 height=480>
				It seems you are using an outdated browser that does not support canvas :-(
			</canvas>
			<canvas id="cv4" width=640 height=480>
				It seems you are using an outdated browser that does not support canvas :-(
			</canvas>
			<canvas id="cv5" width=640 height=480>
				It seems you are using an outdated browser that does not support canvas :-(
			</canvas>
			<p></p>
			<div class="col-full">
				<p>
					Source code and projects are licensed under the terms of the GNU Lesser General Public License v2.1 (<a  class="redones-link" href="http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html">LGPL</a>). Images and videos are licensed under Attribution-NonCommercial-ShareAlike 4.0 International (<a href="http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html" class="redones-link">CC BY-NC-SA 4.0</a>)
				</p>
			</div>
		</section>
 
	</div>

	<script>
	if (!window.jQuery) 
	{
	    document.write('<script src="js/vendor/jquery.1.11.min.js"><\/script>');
	}
	</script>

	<script type="text/javascript" src="js/vendor/jquery.fluidbox.min.js"></script>
	<script type="text/javascript" src="js/run_prettify.js"></script>
	<script type="text/javascript" src="js/main.js"></script>


	<script type="text/javascript">
		

		window.onload = function () { 

					
					var canvas = document.getElementById('cv');
					canvas.style.display="none";
					var canvas1 = document.getElementById('cv1');
					canvas1.style.display="none";
					var canvas2 = document.getElementById('cv2');
					canvas2.style.display="none";
					var canvas3 = document.getElementById('cv3');
					canvas3.style.display="none";
					var canvas4 = document.getElementById('cv4');
					canvas4.style.display="none";
					var canvas5 = document.getElementById('cv5');
					canvas5.style.display="none";


					ReplaceContentInContainer('middle',document.getElementById('about').innerHTML)
					document.getElementById('ab').style.color = '#ced9e0';

		 }


		function ReplaceContentInContainer(id,content,endId) {

			//$("#week2").insertBefore("#cv1");

			var canvas = document.getElementById('cv');
			canvas.style.display="none";
			var canvas1 = document.getElementById('cv1');
			canvas1.style.display="none";
			var canvas2 = document.getElementById('cv2');
			canvas2.style.display="none";
			var canvas3 = document.getElementById('cv3');
			canvas3.style.display="none";
			var canvas4 = document.getElementById('cv4');
			canvas4.style.display="none";
			var canvas5 = document.getElementById('cv5');
			canvas5.style.display="none";

			var container = document.getElementById(id);
			container.innerHTML = content;

			document.getElementById('ex').style.color = '#e85151';
			document.getElementById('ab').style.color = '#e85151';
			document.getElementById('co').style.color = '#e85151';
			document.getElementById('fp').style.color = '#e85151';

			if(endId=='exercises'){
				document.getElementById('ex').style.color = '#ced9e0';
			}else
			if(endId=='about'){
				document.getElementById('ab').style.color = '#ced9e0';
			}else
			if(endId=='contact'){
				document.getElementById('co').style.color = '#ced9e0';
			}else
			if(endId=='final_project'){
				document.getElementById('fp').style.color = '#ced9e0';
			}else
			if(endId=='week2'){
				
				var canvas = document.getElementById('cv');
			    var viewer = new JSC3D.Viewer(canvas);
			    viewer.setParameter('SceneUrl','drawings/cubic_frame.obj');
			    viewer.setParameter('ModelColor','#FFFFFF');
			    viewer.setParameter('BackgroundColor1','##CCCCA3');
			    viewer.setParameter('BackgroundColor2','##CCCCA3');
			    viewer.setParameter('RenderMode','flat');
			    viewer.setParameter('MipMapping','on');
			    viewer.setParameter('Definition','high');
			    viewer.setParameter('Renderer','webgl');
			    viewer.init();
			    viewer.update();

			    canvas.style.display="block";

			}else
			if(endId=='week5'){
				
				var canvas1 = document.getElementById('cv1');
			    var viewer = new JSC3D.Viewer(canvas1);
			    viewer.setParameter('SceneUrl','drawings/week5/spheres.obj');
			    viewer.setParameter('ModelColor','#FFFFFF');
			    viewer.setParameter('BackgroundColor1','##CCCCA3');
			    viewer.setParameter('BackgroundColor2','##CCCCA3');
			    viewer.setParameter('RenderMode','flat');
			    viewer.setParameter('MipMapping','on');
			    viewer.setParameter('Definition','high');
			    viewer.setParameter('Renderer','webgl');
			    viewer.init();
			    viewer.update();

			    canvas1.style.display="block";

			    var canvas2 = document.getElementById('cv2');
			    var viewer = new JSC3D.Viewer(canvas2);
			    viewer.setParameter('SceneUrl','drawings/week5/fractal_tube.obj');
			    viewer.setParameter('ModelColor','#FFFFFF');
			    viewer.setParameter('BackgroundColor1','##CCCCA3');
			    viewer.setParameter('BackgroundColor2','##CCCCA3');
			    viewer.setParameter('RenderMode','flat');
			    viewer.setParameter('MipMapping','on');
			    viewer.setParameter('Definition','high');
			    viewer.setParameter('Renderer','webgl');
			    viewer.init();
			    viewer.update();

			    canvas2.style.display="block";

			 	var canvas3 = document.getElementById('cv3');
			    var viewer = new JSC3D.Viewer(canvas3);
			    viewer.setParameter('SceneUrl','drawings/week5/scan.obj');
			    viewer.setParameter('ModelColor','#FFFFFF');
			    viewer.setParameter('BackgroundColor1','##CCCCA3');
			    viewer.setParameter('BackgroundColor2','##CCCCA3');
			    viewer.setParameter('RenderMode','flat');
			    viewer.setParameter('MipMapping','on');
			    viewer.setParameter('Definition','high');
			    viewer.setParameter('Renderer','webgl');
			    viewer.init();
			    viewer.update();

			    canvas3.style.display="block";

			}else
			if(endId=='week8'){
				
				var canvas4 = document.getElementById('cv4');
			    var viewer = new JSC3D.Viewer(canvas4);
			    viewer.setParameter('SceneUrl','drawings/week8/work_table.obj');
			    viewer.setParameter('ModelColor','#FFFFFF');
			    viewer.setParameter('BackgroundColor1','##CCCCA3');
			    viewer.setParameter('BackgroundColor2','##CCCCA3');
			    viewer.setParameter('RenderMode','flat');
			    viewer.setParameter('MipMapping','on');
			    viewer.setParameter('Definition','high');
			    viewer.setParameter('Renderer','webgl');
			    viewer.init();
			    viewer.update();

			    canvas4.style.display="block";

			}else
			if(endId=='week9'){
				
				var canvas4 = document.getElementById('cv5');
			    var viewer = new JSC3D.Viewer(canvas5);
			    viewer.setParameter('SceneUrl','drawings/week9/spirals.stl');
			    viewer.setParameter('ModelColor','#FFFFFF');
			    viewer.setParameter('BackgroundColor1','##CCCCA3');
			    viewer.setParameter('BackgroundColor2','##CCCCA3');
			    viewer.setParameter('RenderMode','flat');
			    viewer.setParameter('MipMapping','on');
			    viewer.setParameter('Definition','high');
			    viewer.setParameter('Renderer','webgl');
			    viewer.init();
			    viewer.update();

			    canvas4.style.display="block";

			}

		}
	</script>




</body>
</html>

